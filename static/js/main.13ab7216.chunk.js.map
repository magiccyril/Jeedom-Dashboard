{"version":3,"sources":["components/LaunchScreen/loader.svg","components/Summary/sun.svg","components/Summary/rain.svg","components/Summary/light.svg","redux/utils/storage.js","redux/utils/jeedom.js","redux/modules/settingsForm.js","redux/modules/launchScreen.js","redux/modules/snackbar.js","redux/modules/settings.js","constants/equipments.js","redux/modules/summary.js","redux/modules/room.js","redux/modules/camera.js","constants/commands.js","redux/modules/light.js","redux/modules/door.js","redux/modules/mode.js","redux/modules/thermostat.js","redux/configureStore.js","containers/SettingsForm/SettingsForm.js","components/LaunchScreen/LaunchScreen.js","components/Pill/Pill.js","components/Summary/Summary.js","components/Header/Header.js","components/Card/Card.js","components/CardCamera/CardCamera.js","components/Backdrop/Backdrop.js","components/BackdropDoorHistory/BackdropDoorHistory.js","components/utils.js","components/CardCameraGarage/CardCameraGarage.js","components/CardDoor/CardDoor.js","components/CardLights/CardLights.js","components/CardMode/CardMode.js","components/CardWeather/CardWeather.js","components/CardThermostat/CardThermostat.js","containers/CardList/CardList.js","components/Room/Room.js","components/RoomList/RoomList.js","components/BackdropSettings/BackdropSettings.js","components/Snackbar/Snackbar.js","containers/App/App.js","serviceWorker.js","index.js"],"names":["module","exports","setStorageSettings","settings","Promise","resolve","reject","localStorage","setItem","url","apikey","e","getStorageSettings","getItem","JEE_API","getRandomInt","Math","floor","random","getJeedomVersion","payload","options","method","body","JSON","stringify","fetch","then","response","json","getJeedomEquipment","equipmentId","result","getJeedomRooms","execJeedomCmd","id","requestOptions","getJeedomCommand","getJeedomCommandHistory","saga","settingsFormSaveSaga","SETTINGS_FORM_SAVE_REQUESTED","SETTINGS_FORM_CHECK_FAILED","SETTINGS_FORM_SAVE_SUCCEEDED","SETTINGS_FORM_SAVE_FAILED","initialState","checkFailed","saveRequested","saveFailed","takeLatest","action","call","error","Error","message","put","type","onSuccess","appLaunchSaga","settingsFormSaveSucceededSaga","APP_LAUNCH_REQUESTED","APP_LAUNCH_SUCCEEDED","APP_LAUNCH_FAILED","show","showSetup","appLaunchSucceeded","takeEvery","snackbarSaga","SHOW_SNACKBAR_DELAY","SNACKBAR_SHOW","SNACKBAR_HIDE","text","showErrorSnackbar","delay","settingsFormSucceededSaga","SETTINGS_SHOW","SETTINGS_HIDE","SETTINGS_FORM_SUCCEEDED","hideSettings","SUMMARY_ID","ALL_LIGHT_STATUS_ID","summaryIntervalRegistrationSaga","summaryRequestSaga","SUMMARY_INTERVAL_REGISTRATION","SUMMARY_REQUESTED","SUMMARY_LOADED","SUMMARY_ERRORED","homeTemperature","outsideTemperature","outsideRain","summaryRequested","summaryLoaded","roomRequestSaga","ROOM_REQUESTED","ROOM_LOADED","ROOM_ERRORED","loading","list","roomsLoaded","cameraImageRequestSaga","CAMERA_IMAGE_REQUESTED","CAMERA_IMAGE_LOADED","CAMERA_IMAGE_ERRORED","cameraImageLoaded","cameraId","imageUrl","equipment","undefined","cameraUrl","cmds","find","el","generic_type","TypeError","currentValue","ALL_LIGHT_OFF_CMD","lightStatusRequestSaga","lightAllOffRequestSaga","LIGHT_ALL_STATUS_REQUESTED","LIGHT_ALL_STATUS_LOADED","LIGHT_ALL_STATUS_ERRORED","LIGHT_ALL_OFF_REQUESTED","lights","allLightStatusRequested","allLightStatusLoaded","doorStatusWithHistoryRequestSaga","doorStatusRequestSaga","doorHistoryRequestSaga","DOOR_STATUS_WITH_HISTORY_REQUESTED","DOOR_STATUS_REQUESTED","DOOR_STATUS_LOADED","DOOR_STATUS_ERRORED","DOOR_HISTORY_REQUESTED","DOOR_HISTORY_LOADED","DOOR_HISTORY_ERRORED","DOOR_HISTORY_SHOW","DOOR_HISTORY_HIDE","doorStatusErrored","doorHistoryRequested","doorHistoryErrored","putResolve","command","history","historyPayload","modeListRequestSaga","modeChangeRequestSaga","REFRESH_DELAY","SNACKBAR_ERROR","MODE_LIST_REQUESTED","MODE_LIST_LOADED","MODE_LIST_ERRORED","MODE_CHANGE_REQUESTED","MODE_CHANGE_SUCCEEDED","MODE_CHANGE_ERRORED","modeListRequested","modeListErrored","modeChangeErrored","cmd","thermostatRequestSaga","thermostatModeChangeRequestSaga","CHANGE_MODE_REFRESH_DELAY","CHANGE_MODE_ERROR_SNACKBAR","THERMOSTAT_REQUESTED","THERMOSTAT_LOADED","THERMOSTAT_ERRORED","THERMOSTAT_MODE_CHANGE_REQUESTED","THERMOSTAT_MODE_CHANGE_ERRORED","THERMOSTAT_MODE_CHANGE_SUCCEEDED","thermostatRequested","thermostatLoaded","thermostat","thermostatErrored","takeLeading","thermostatId","thermostatName","name","availableModes","filter","isVisible","thermostatModes","forEach","mode","push","order","currentMode","logicalId","thermostatCurrentMode","thermostatPower","thermostatTemperature","thermostatSetPoint","modes","power","temperature","setpoint","rootSaga","sagaMiddleware","createSagaMiddleware","storeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","launchScreen","state","settingsForm","snackbar","summary","light","parseFloat","toFixed","room","map","camera","label","singularComplement","display","parameters","value","door","statusPayload","open","event","datetime","DateTime","fromFormat","sort","a","b","diff","showHistory","currentModeValue","loadedThermostat","spawn","launchScreenSaga","settingsFormSaga","settingsSaga","snackBarSaga","summarySaga","roomSaga","cameraSaga","lightSaga","doorSaga","modeSaga","thermostatSaga","store","createStore","applyMiddleware","run","SettingsForm","handleChange","bind","handleSubmit","setState","this","target","preventDefault","props","saveSettingsForm","errorCheck","className","role","errorSave","button","disabled","onSubmit","htmlFor","onChange","Component","connect","LaunchScreen","loader","src","loaderSvg","width","alt","Pill","pillImageUrl","image","pillImage","pillImgStyle","backgroundImage","pillClassName","join","style","Summary","outsideImage","imgRain","imgSun","imgLight","Header","collapsedClassName","collapsed","href","onClick","onShowSettings","Card","cssClass","backgroundUrl","backgroundSize","imgTop","imgBottom","overlay","hasChildren","children","title","CardCamera","time","Date","now","cameraImage","Backdrop","handleClose","setTimeout","onClose","HISTORY_LENGTH","formatHistoryListItem","element","i","badgeClassName","key","toFormat","BackdropDoorHistory","historyList","slice","formatDoorDate","object","status","length","diffNow","negate","CardCameraGarage","onHistoryClick","onHistoryBackdropClose","CardDoor","CardLights","lightsOn","reduce","labels","item","onRetry","onOffClick","CardMode","currentModeName","buttons","cmdId","onModeClick","aria-label","CardWeather","CardThermostat","showPower","showButtons","modeIndex","defaultModeIndex","handleChangeCancel","handleChangeMode","handleOnChange","indexOf","onModeChange","step","datalistOptions","optionSize","changeButtons","min","max","CardList","handleHouseModeRetry","handleLightStatusRetry","getAllLightStatus","getDoorStatusHistory","getCameraImage","getMode","getThermostat","modeState","formatModeToProps","handleLightOffClick","garageCameraImage","garageDoor","handleDoorHistoryClick","handleHistoryBackdropClose","enrtyDoor","livingCameraImage","houseMode","livingThermostat","handleThermostatModeChange","mapDispatchToProps","Room","RoomList","getRooms","empty","rooms","BackdropSettings","Snackbar","App","collapsedHeader","handleScroll","threshold","getComputedStyle","document","documentElement","fontSize","scrollY","addEventListener","appLaunchRequested","setSummaryIntervalRegistration","removeEventListener","handleLaunchScreenSetupSuccess","handleShowSettings","showSettingsBackdrop","handleCloseSettings","handleSettingsBackdropFormSuccess","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.13ab7216.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loader.27e2ef14.svg\";","module.exports = __webpack_public_path__ + \"static/media/sun.3b2f1925.svg\";","module.exports = __webpack_public_path__ + \"static/media/rain.5804a26e.svg\";","module.exports = __webpack_public_path__ + \"static/media/light.9eee2013.svg\";","export function setStorageSettings(settings) {\n  return new Promise((resolve, reject) => {\n    try {\n      localStorage.setItem('url', settings.url);\n      localStorage.setItem('apikey', settings.apikey);\n\n      resolve();\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\nexport function getStorageSettings() {\n  return new Promise((resolve, reject) => {\n    try {\n      const url = localStorage.getItem('url');\n      const apikey = localStorage.getItem('apikey');\n\n      resolve({ url, apikey });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}","import { getStorageSettings } from './storage';\n\nconst JEE_API = 'core/api/jeeApi.php';\n\nfunction getRandomInt() {\n  return Math.floor(Math.random() * Math.floor(100));\n}\n\nexport function getJeedomVersion(payload) {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify({\n      'jsonrpc': '2.0',\n      'id': getRandomInt(),\n      'method': 'version',\n      'params': {\n        'apikey': payload.apikey,\n      }\n    })\n  };\n\n  return fetch(payload.url + JEE_API, options)\n    .then(response => response.json())\n}\n\nexport function getJeedomEquipment(equipmentId) {\n  return getStorageSettings()\n    .then((settings) => {\n      const options = {\n        method: 'POST',\n        body: JSON.stringify({\n          'jsonrpc': '2.0',\n          'id': getRandomInt(),\n          'method': 'eqLogic::fullById',\n          'params': {\n            'apikey': settings.apikey,\n            'id': equipmentId,\n          }\n        })};\n      const url = settings.url + JEE_API;\n      return fetch(url, options)\n    })\n    .then(response => response.json())\n    .then(response => response.result) \n}\n\nexport function getJeedomRooms() {\n  return getStorageSettings()\n    .then((settings) => {\n      const options = {\n        method: 'POST',\n        body: JSON.stringify({\n          'jsonrpc': '2.0',\n          'id': getRandomInt(),\n          'method': 'object::all',\n          'params': {\n            'apikey': settings.apikey\n          }\n        })};\n      const url = settings.url + JEE_API;\n      return fetch(url, options)\n    })\n    .then(response => response.json())\n    .then(response => response.result)\n}\n\nexport function execJeedomCmd(id, options = {}) {\n  return getStorageSettings()\n    .then((settings) => {\n      const requestOptions = {\n        method: 'POST',\n        body: JSON.stringify({\n          'jsonrpc': '2.0',\n          'id': getRandomInt(),\n          'method': 'cmd::execCmd',\n          'params': {\n            'apikey': settings.apikey,\n            'id': id,\n            'options': options,\n          }\n        })};\n      const url = settings.url + JEE_API;\n      return fetch(url, requestOptions)\n    })\n    .then(response => response.json())\n    .then(response => response.result)  \n}\n\nexport function getJeedomCommand(id) {\n  return getStorageSettings()\n    .then((settings) => {\n      const requestOptions = {\n        method: 'POST',\n        body: JSON.stringify({\n          'jsonrpc': '2.0',\n          'id': getRandomInt(),\n          'method': 'cmd::byId',\n          'params': {\n            'apikey': settings.apikey,\n            'id': id,\n          }\n        })};\n      const url = settings.url + JEE_API;\n      return fetch(url, requestOptions)\n    })\n    .then(response => response.json())\n    .then(response => response.result)  \n}\n\nexport function getJeedomCommandHistory(id) {\n  return getStorageSettings()\n    .then((settings) => {\n      const requestOptions = {\n        method: 'POST',\n        body: JSON.stringify({\n          'jsonrpc': '2.0',\n          'id': getRandomInt(),\n          'method': 'cmd::getHistory',\n          'params': {\n            'apikey': settings.apikey,\n            'id': id,\n          }\n        })};\n      const url = settings.url + JEE_API;\n      return fetch(url, requestOptions)\n    })\n    .then(response => response.json())\n    .then(response => response.result)  \n}","import { takeLatest, call, put } from 'redux-saga/effects';\nimport { getJeedomVersion } from '../utils/jeedom';\nimport { setStorageSettings } from '../utils/storage';\n\n// Actions\nexport const SETTINGS_FORM_SAVE_REQUESTED = 'SETTINGS_FORM_SAVE_REQUESTED';\nexport const SETTINGS_FORM_CHECK_FAILED = 'SETTINGS_FORM_CHECK_FAILED';\nexport const SETTINGS_FORM_SAVE_SUCCEEDED = 'SETTINGS_FORM_SAVE_SUCCEEDED';\nexport const SETTINGS_FORM_SAVE_FAILED = 'SETTINGS_FORM_SAVE_FAILED';\n\n// Reducer\nconst initialState = {\n  checkFailed: false,\n  saveRequested: false,\n  saveFailed: false,\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case SETTINGS_FORM_SAVE_REQUESTED:\n      return { checkFailed: false, saveRequested: true, saveFailed: false };\n\n    case SETTINGS_FORM_CHECK_FAILED:\n      return { checkFailed: true, saveRequested: false, saveFailed: false }\n\n    case SETTINGS_FORM_SAVE_FAILED:\n      return { checkFailed: false, saveRequested: false, saveFailed: true }\n\n    case SETTINGS_FORM_SAVE_SUCCEEDED:\n      return { checkFailed: false, saveRequested: false, saveFailed: false }\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function saveSettingsForm(payload) {\n  return { type: SETTINGS_FORM_SAVE_REQUESTED, payload}\n}\nexport function checkSettingsFormFailed() {\n  return { type: SETTINGS_FORM_CHECK_FAILED }\n}\nexport function saveSettingsFormSucceeded(payload) {\n  return { type: SETTINGS_FORM_SAVE_SUCCEEDED, payload }\n}\nexport function saveSettingsFormFailed() {\n  return { type: SETTINGS_FORM_SAVE_FAILED }\n}\n\n\n// Side effects\nexport function* saga() {\n  yield takeLatest(SETTINGS_FORM_SAVE_REQUESTED, settingsFormSaveSaga);\n}\n\nfunction* settingsFormSaveSaga(action) {\n  try {\n    const response = yield call(getJeedomVersion, action.payload);\n\n    if (response.error) {\n      throw new Error(response.error.message);\n    }\n  } catch (e) {\n    yield put(checkSettingsFormFailed(e))\n    return;\n  }\n\n  try {\n    yield call(setStorageSettings, action.payload);\n    yield put(saveSettingsFormSucceeded(action.payload));\n\n    if (action.payload.onSuccess) {\n      yield put(action.payload.onSuccess());\n    }\n  } catch (e) {\n    yield put(saveSettingsFormFailed(e))\n  }\n}","import { takeEvery, takeLatest, call, put } from 'redux-saga/effects';\nimport { getJeedomVersion } from '../utils/jeedom';\nimport { getStorageSettings } from '../utils/storage';\nimport { SETTINGS_FORM_SAVE_SUCCEEDED } from './settingsForm';\n\n// Actions\nexport const APP_LAUNCH_REQUESTED = 'APP_LAUNCH_REQUESTED';\nexport const APP_LAUNCH_SUCCEEDED = 'APP_LAUNCH_SUCCEEDED';\nexport const APP_LAUNCH_FAILED = 'APP_LAUNCH_FAILED';\n\n// Reducer\nconst initialState = {\n  show: true,\n  showSetup: false,\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case APP_LAUNCH_FAILED:\n      return { show: true, showSetup: true }\n      \n    case APP_LAUNCH_SUCCEEDED:\n      return { show: false, showSetup: false };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function appLaunchRequested() {\n  return { type: APP_LAUNCH_REQUESTED };\n}\nexport function appLaunchSucceeded() {\n  return { type: APP_LAUNCH_SUCCEEDED };\n}\nexport function appLaunchFailed() {\n  return { type: APP_LAUNCH_FAILED };\n}\n\n// Side effects\nexport function* saga() {\n  yield takeLatest(APP_LAUNCH_REQUESTED, appLaunchSaga);\n  yield takeEvery(SETTINGS_FORM_SAVE_SUCCEEDED, settingsFormSaveSucceededSaga);\n}\n\nfunction* appLaunchSaga() {\n  try {\n    const settings = yield call(getStorageSettings);\n\n    if (!settings.url || !settings.apikey) {\n      throw new Error('Settings undefined');\n    }\n\n    const response = yield call(getJeedomVersion, settings);\n    if (response.error) {\n      throw new Error(response.error.message);\n    }\n\n    yield put(appLaunchSucceeded());\n  } catch (e) {\n    yield put(appLaunchFailed(e))\n    return;\n  }\n}\n\nfunction* settingsFormSaveSucceededSaga() {\n  yield put(appLaunchSucceeded());\n}","import { takeLatest, put, delay } from 'redux-saga/effects';\n\nconst SHOW_SNACKBAR_DELAY = 10 * 1000;\nconst DEFAULT_TYPE = 'success';\n\n// Actions\nconst SNACKBAR_SHOW = 'SNACKBAR_SHOW';\nconst SNACKBAR_HIDE = 'SNACKBAR_HIDE';\n\n// Reducer\nconst initialState = {\n  text: '',\n  type: 'success',\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case SNACKBAR_SHOW:\n      return { text: action.payload.text, type: action.payload.type }\n\n    case SNACKBAR_HIDE:\n      return { text: '' }\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function showSnackbar(text) {\n  return { type: SNACKBAR_SHOW, payload: {\n    text: text,\n    type:  DEFAULT_TYPE,\n  }};\n}\nexport function showSuccessSnackbar(text) {\n  return { type: SNACKBAR_SHOW, payload: {\n    text: text,\n    type: 'success',\n  }};\n}\nexport function showWarningSnackbar(text) {\n  return { type: SNACKBAR_SHOW, payload: {\n    text: text,\n    type: 'warning',\n  }};\n}\nexport function showErrorSnackbar(text) {\n  return { type: SNACKBAR_SHOW, payload: {\n    text: text,\n    type: 'danger',\n  }};\n}\nexport function hideSnackbar() {\n  return { type: SNACKBAR_HIDE };\n}\n\n// Side effects\nexport function* saga() {\n  yield takeLatest(SNACKBAR_SHOW, snackbarSaga);\n}\n\nfunction* snackbarSaga() {\n  yield delay(SHOW_SNACKBAR_DELAY);\n  yield put(hideSnackbar())\n}","import { takeEvery, put } from 'redux-saga/effects';\nimport { showSuccessSnackbar } from './snackbar';\n\n// Actions\nexport const SETTINGS_SHOW = 'SETTINGS_SHOW';\nexport const SETTINGS_HIDE = 'SETTINGS_HIDE';\nexport const SETTINGS_FORM_SUCCEEDED = 'SETTINGS_FORM_SUCCEEDED';\n\n// Reducer\nconst initialState = {\n  show: false,\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case SETTINGS_SHOW:\n      return { show: true, checkFailed: false, saveRequested: false, saveFailed: false };\n\n    case SETTINGS_HIDE:\n      return { show: false, checkFailed: false, saveRequested: false, saveFailed: false };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function showSettings(e) {\n  if (e) {\n    e.preventDefault();\n  }\n  return { type: SETTINGS_SHOW };\n}\nexport function hideSettings() {\n  return { type: SETTINGS_HIDE };\n}\nexport function settingsFormSucceeded() {\n  return { type: SETTINGS_FORM_SUCCEEDED };\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(SETTINGS_FORM_SUCCEEDED, settingsFormSucceededSaga);\n}\n\nfunction* settingsFormSucceededSaga() {\n  yield put(hideSettings());\n  yield put(showSuccessSnackbar('Paramètres enregistrés !'));\n}","export const SUMMARY_ID = 185;\nexport const GARAGE_CAMERA_ID = 56;\nexport const LIVING_CAMERA_ID = 52;\nexport const LIVING_THERMOSTAT_ID = 48;\nexport const ALL_LIGHT_STATUS_ID = 190; \nexport const HOUSE_MODE_ID = 80;\n","import { takeEvery, takeLatest, call, put, delay } from 'redux-saga/effects';\nimport { getJeedomEquipment } from '../utils/jeedom';\n\nimport { SUMMARY_ID } from '../../constants/equipments';\n\n// Actions\nexport const SUMMARY_INTERVAL_REGISTRATION = 'SUMMARY_INTERVAL_REGISTRATION';\nexport const SUMMARY_REQUESTED = 'SUMMARY_REQUESTED';\nexport const SUMMARY_LOADED = 'SUMMARY_LOADED';\nexport const SUMMARY_ERRORED = 'SUMMARY_ERRORED';\n\n// Reducer\nconst initialState = {\n  homeTemperature: '-',\n  outsideTemperature: '-',\n  outsideRain: '-',\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case SUMMARY_LOADED:\n      const cmds = action.payload.cmds;\n\n      const homeTemperature = cmds.find(el => (el.name === 'temp-home'));\n      const outsideTemperature = cmds.find(el => (el.name === 'temp-outside'));\n      const outsideRain = cmds.find(el => (el.name === 'rain'));\n      const light = cmds.find(el => (el.name === 'light'));\n\n      return {\n        homeTemperature: homeTemperature ? parseFloat(homeTemperature.currentValue).toFixed(1) : '-',\n        outsideTemperature: outsideTemperature ? outsideTemperature.currentValue : '-',\n        outsideRain: outsideRain ? outsideRain.currentValue : '-',\n        light: light.currentValue,\n      };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function setSummaryIntervalRegistration() {\n  return { type: SUMMARY_INTERVAL_REGISTRATION }\n}\nexport function summaryRequested() {\n  return { type: SUMMARY_REQUESTED }\n}\nexport function summaryLoaded(payload) {\n  return { type: SUMMARY_LOADED, payload }\n}\nexport function summaryErrored(e) {\n  return { type: SUMMARY_ERRORED, payload: e };\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(SUMMARY_REQUESTED, summaryRequestSaga);\n  yield takeLatest(SUMMARY_INTERVAL_REGISTRATION, summaryIntervalRegistrationSaga);\n}\n\nfunction* summaryIntervalRegistrationSaga() {\n  while(true) {\n    yield put(summaryRequested())\n    yield delay(60 * 1000);\n  }\n}\n\nfunction* summaryRequestSaga() {\n  try {\n    const payload = yield call(getJeedomEquipment, SUMMARY_ID);\n    yield put(summaryLoaded(payload));\n  } catch (e) {\n    yield put(summaryErrored(e));\n  }\n}","import { takeEvery, call, put } from 'redux-saga/effects';\nimport { getJeedomRooms } from '../utils/jeedom';\n\n// Actions\nexport const ROOM_REQUESTED = 'ROOM_REQUESTED';\nexport const ROOM_LOADED = 'ROOM_LOADED';\nexport const ROOM_ERRORED = 'ROOM_ERRORED';\n\n// Reducer\nconst initialState = {\n  loading: false,\n  error: false,\n  list: [],\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case ROOM_REQUESTED:\n      return {\n        loading: true,\n        error: false,\n        list: [],\n      };\n    case ROOM_LOADED:\n      return {\n        loading: false,\n        error: false,\n        list: action.payload.map(room => {\n          return {id: room.id, name: room.name}\n        }),\n      };\n    case ROOM_ERRORED:\n      return {\n        loading: false,\n        error: true,\n        list: [],\n    };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function roomsRequested() {\n  return { type: ROOM_REQUESTED };\n}\nexport function roomsLoaded(payload) {\n  return { type: ROOM_LOADED, payload }\n}\nexport function roomsErrored(e) {\n  return { type: ROOM_ERRORED, payload: e };\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(ROOM_REQUESTED, roomRequestSaga);\n}\n\nfunction* roomRequestSaga() {\n  try {\n    const payload = yield call(getJeedomRooms);\n    yield put(roomsLoaded(payload));\n  } catch (e) {\n    yield put(roomsErrored(e));\n  }\n}","import { takeEvery, call, put } from 'redux-saga/effects';\nimport { getJeedomEquipment } from '../utils/jeedom';\nimport { getStorageSettings } from '../utils/storage';\n\n// Actions\nexport const CAMERA_IMAGE_REQUESTED = 'CAMERA_IMAGE_REQUESTED';\nexport const CAMERA_IMAGE_LOADED = 'CAMERA_IMAGE_LOADED';\nexport const CAMERA_IMAGE_ERRORED = 'CAMERA_IMAGE_ERRORED';\n\n// Reducer\nconst initialState = {};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case CAMERA_IMAGE_LOADED:\n      const cameraId = action.payload.cameraId;\n      const imageUrl = action.payload.imageUrl;\n\n      if (!cameraId || !imageUrl) {\n        return { ...state };\n      }\n\n      return {\n        ...state,\n        [cameraId]: imageUrl,\n      };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function cameraImageRequested(cameraId) {\n  return { type: CAMERA_IMAGE_REQUESTED, cameraId: cameraId}\n}\nexport function cameraImageLoaded(cameraId, imageUrl) {\n  return { type: CAMERA_IMAGE_LOADED, payload: { cameraId, imageUrl } }\n}\nexport function cameraImageErrored(e) {\n  return { type: CAMERA_IMAGE_ERRORED, error: e };\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(CAMERA_IMAGE_REQUESTED, cameraImageRequestSaga);\n}\n\nexport function* cameraImageRequestSaga(action) {\n  try {\n    const cameraId = action.cameraId;\n\n    const settings = yield call(getStorageSettings);\n    const equipment = yield call(getJeedomEquipment, cameraId);\n\n    const cameraUrl = equipment.cmds.find(el => (\n      el.generic_type === 'CAMERA_URL'\n    ));\n    \n    if (cameraUrl === undefined) {\n      throw new TypeError('Camera not detected');\n    }\n\n    yield put(cameraImageLoaded(cameraId, settings.url + cameraUrl.currentValue));\n  } catch (e) {\n    yield put(cameraImageErrored(e));\n  }\n}\n","export const ALL_LIGHT_OFF_CMD = 1094;\nexport const GARAGE_DOOR_CMD = 2144;\nexport const ENTRY_DOOR_CMD = 2147;","import { takeEvery, call, put, delay } from 'redux-saga/effects';\nimport { getJeedomEquipment, execJeedomCmd } from '../utils/jeedom';\n\nimport { ALL_LIGHT_OFF_CMD } from '../../constants/commands';\nimport { ALL_LIGHT_STATUS_ID } from '../../constants/equipments';\nimport { showErrorSnackbar } from './snackbar';\nimport { summaryRequested } from './summary';\n\n// Actions\nexport const LIGHT_ALL_STATUS_REQUESTED = 'LIGHT_ALL_STATUS_REQUESTED';\nexport const LIGHT_ALL_STATUS_LOADED = 'LIGHT_ALL_STATUS_LOADED';\nexport const LIGHT_ALL_STATUS_ERRORED = 'LIGHT_ALL_STATUS_ERRORED';\nexport const LIGHT_ALL_OFF_REQUESTED = 'LIGHT_ALL_OFF_REQUESTED';\n\n// Reducer\nconst initialState = {\n  loading: false,\n  error: false,\n  lights: [],\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case LIGHT_ALL_STATUS_REQUESTED:\n      return {\n        loading: true,\n        error: false,\n        lights: [],\n      };\n\n    case LIGHT_ALL_STATUS_ERRORED:\n      return {\n        loading: false,\n        error: true,\n        lights: [],\n      };\n    \n    case LIGHT_ALL_STATUS_LOADED:\n      const cmds = action.payload.cmds;\n\n      let lights = [];\n      cmds.forEach(cmd => {\n        if (cmd.isVisible === '1' && cmd.logicalId !== 'refresh') {\n          let label = cmd.name;\n          let singularComplement = 'de la';\n          if (cmd.display.parameters\n            && cmd.display.parameters.label\n            && cmd.display.parameters.singularComplement) {\n            label = cmd.display.parameters.label;\n            singularComplement = cmd.display.parameters.singularComplement;\n          }\n          \n          lights.push({\n            id: cmd.id,\n            name: cmd.name,\n            order: cmd.order,\n            value: cmd.currentValue,\n            label: label,\n            singularComplement: singularComplement,\n          });\n        }\n      });\n\n      return {\n        loading: false,\n        error: false,\n        lights: lights,\n      };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function allLightStatusRequested() {\n  return { type: LIGHT_ALL_STATUS_REQUESTED }\n}\nexport function allLightStatusLoaded(payload) {\n  return { type: LIGHT_ALL_STATUS_LOADED, payload: payload }\n}\nexport function allLightStatusErrored(e) {\n  return { type: LIGHT_ALL_STATUS_ERRORED, payload: e };\n}\n\nexport function allLightsOffRequested() {\n  return { type: LIGHT_ALL_OFF_REQUESTED }\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(LIGHT_ALL_STATUS_REQUESTED, lightStatusRequestSaga);\n  yield takeEvery(LIGHT_ALL_OFF_REQUESTED, lightAllOffRequestSaga);\n}\n\nfunction* lightStatusRequestSaga(action) {\n  try {\n    const payload = yield call(getJeedomEquipment, ALL_LIGHT_STATUS_ID);\n    yield put(allLightStatusLoaded(payload));\n  } catch (e) {\n    yield put(allLightStatusErrored(e));\n  }\n}\n\nfunction* lightAllOffRequestSaga() {\n  try {\n    yield call(execJeedomCmd, ALL_LIGHT_OFF_CMD);\n    yield delay(3 * 1000);\n    yield put(allLightStatusRequested());\n    yield put(summaryRequested());\n  } catch (e) {\n    yield put(showErrorSnackbar(\"Erreur lors de l'extinction des lumières !\"));\n  }\n}\n","import { takeEvery, call, put, putResolve } from 'redux-saga/effects';\nimport { getJeedomCommand, getJeedomCommandHistory } from '../utils/jeedom';\nimport { DateTime } from 'luxon';\n\n// Actions\nexport const DOOR_STATUS_WITH_HISTORY_REQUESTED = 'DOOR_STATUS_WITH_HISTORY_REQUESTED';\nexport const DOOR_STATUS_REQUESTED = 'DOOR_STATUS_REQUESTED';\nexport const DOOR_STATUS_LOADED = 'DOOR_STATUS_LOADED';\nexport const DOOR_STATUS_ERRORED = 'DOOR_STATUS_ERRORED';\nexport const DOOR_HISTORY_REQUESTED = 'DOOR_HISTORY_REQUESTED';\nexport const DOOR_HISTORY_LOADED = 'DOOR_HISTORY_LOADED';\nexport const DOOR_HISTORY_ERRORED = 'DOOR_HISTORY_ERRORED';\nexport const DOOR_HISTORY_SHOW = 'DOOR_HISTORY_SHOW';\nexport const DOOR_HISTORY_HIDE = 'DOOR_HISTORY_HIDE';\n\n// Reducer\nconst initialState = {\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case DOOR_STATUS_REQUESTED:\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...state[action.payload.id],\n          loading: true,\n        }\n      };\n    \n    case DOOR_STATUS_ERRORED:\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...state[action.payload.id],\n          loading: false,\n          error: true,\n        }\n      }\n\n    case DOOR_STATUS_LOADED:\n      const statusPayload = action.payload;\n\n      let label = statusPayload.name;\n      let singularComplement = 'de la';\n      if (statusPayload.display.parameters\n        && statusPayload.display.parameters.label\n        && statusPayload.display.parameters.singularComplement) {\n        label = statusPayload.display.parameters.label;\n        singularComplement = statusPayload.display.parameters.singularComplement;\n      }\n\n      return {\n        ...state,\n        [statusPayload.id]: {\n          id: statusPayload.id,\n          name: statusPayload.name,\n          order: statusPayload.order,\n          open: statusPayload.currentValue === 0 ? false : true,\n          label: label,\n          singularComplement: singularComplement,\n          loading: false,\n          error: false,\n        }\n      };\n\n      case DOOR_HISTORY_REQUESTED:\n        return {\n          ...state,\n          [action.payload.id]: {\n            ...state[action.payload.id],\n            loading: true,\n            error: false,\n          }\n        };\n      \n      case DOOR_HISTORY_ERRORED:\n          return {\n            ...state,\n            [action.payload.id]: {\n              ...state[action.payload.id],\n              loading: false,\n              error: true,\n            }\n          };\n\n      case DOOR_HISTORY_LOADED:\n        const history = action.payload.history.map(event => ({\n          datetime: DateTime.fromFormat(event.datetime, 'yyyy-MM-dd TT'),\n          open: event.value === '0' ? false : true,\n        })).sort((a, b) => b.datetime.diff(a.datetime));\n\n        return {\n          ...state,\n          [action.payload.id]: {\n            ...state[action.payload.id],\n            history: history,\n          }\n        }\n      \n      case DOOR_HISTORY_SHOW:\n        return {\n          ...state,\n          [action.payload.id]: {\n            ...state[action.payload.id],\n            showHistory: true,\n          }\n        };\n\n      case DOOR_HISTORY_HIDE:\n        return {\n          ...state,\n          [action.payload.id]: {\n            ...state[action.payload.id],\n            showHistory: false,\n          }\n        };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function doorStatusWithHistoryRequested(payload) {\n  return { type: DOOR_STATUS_WITH_HISTORY_REQUESTED, payload: payload }\n}\nexport function doorStatusRequested(payload) {\n  return { type: DOOR_STATUS_REQUESTED, payload: payload }\n}\nexport function doorStatusLoaded(payload) {\n  return { type: DOOR_STATUS_LOADED, payload: payload }\n}\nexport function doorStatusErrored(payload) {\n  return { type: DOOR_STATUS_ERRORED, payload: payload }\n}\nexport function doorHistoryRequested(payload) {\n  return { type: DOOR_HISTORY_REQUESTED, payload: payload }\n}\nexport function doorHistoryLoaded(payload) {\n  return { type: DOOR_HISTORY_LOADED, payload: payload }\n}\nexport function doorHistoryErrored(payload) {\n  return { type: DOOR_HISTORY_ERRORED, payload: payload }\n}\nexport function doorHistoryShow(id) {\n  return { type: DOOR_HISTORY_SHOW, payload: { id: id } }\n}\nexport function doorHistoryHide(id) {\n  return { type: DOOR_HISTORY_HIDE, payload: { id: id } }\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(DOOR_STATUS_WITH_HISTORY_REQUESTED, doorStatusWithHistoryRequestSaga);\n  yield takeEvery(DOOR_STATUS_REQUESTED, doorStatusRequestSaga);\n  yield takeEvery(DOOR_HISTORY_REQUESTED, doorHistoryRequestSaga);\n}\n\nfunction* doorStatusWithHistoryRequestSaga(action) {\n  yield putResolve(doorStatusRequested(action.payload));\n  yield putResolve(doorHistoryRequested(action.payload));\n}\n\nfunction* doorStatusRequestSaga(action) {\n  try {\n    const command = yield call(getJeedomCommand, action.payload.id);\n    yield put(doorStatusLoaded(command));\n  } catch (e) {\n    yield put(doorStatusErrored({\n      id: action.payload.id,\n      error: e,\n    }));\n  }\n}\n\nfunction* doorHistoryRequestSaga(action) {\n  try {\n    const history = yield call(getJeedomCommandHistory, action.payload.id);\n    const historyPayload = {\n      id: action.payload.id,\n      history: history,\n    }\n    yield put(doorHistoryLoaded(historyPayload));\n  } catch (e) {\n    yield put(doorHistoryErrored({\n      id: action.payload.id,\n      error: e,\n    }));\n  }\n}\n","import { takeEvery, call, put, delay } from 'redux-saga/effects';\nimport { getJeedomEquipment, execJeedomCmd } from '../utils/jeedom';\nimport { showErrorSnackbar } from './snackbar';\n\nexport const REFRESH_DELAY = 1000;\n\nexport const SNACKBAR_ERROR = 'Erreur lors du changement de mode !';\n\n// Actions\nexport const MODE_LIST_REQUESTED = 'MODE_LIST_REQUESTED';\nexport const MODE_LIST_LOADED = 'MODE_LIST_LOADED';\nexport const MODE_LIST_ERRORED = 'MODE_LIST_ERRORED';\nexport const MODE_CHANGE_REQUESTED = 'MODE_CHANGE_REQUESTED';\nexport const MODE_CHANGE_SUCCEEDED = 'MODE_CHANGE_SUCCEEDED';\nexport const MODE_CHANGE_ERRORED = 'MODE_CHANGE_ERRORED';\n\n// Reducer\nconst initialState = {\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case MODE_LIST_REQUESTED:\n      return {\n        ...state,\n        [action.id]: {\n          ...state[action.id],\n          id: action.id,\n          loading: true,\n          error: false,\n        }\n      }\n    \n    case MODE_LIST_ERRORED:\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...state[action.payload.id],\n          id: action.payload.id,\n          loading: false,\n          error: true,\n        }\n      }\n\n    case MODE_LIST_LOADED:\n      const equipment = action.payload.equipment;\n      const cmds = equipment.cmds;\n\n      let modes = [];\n      cmds.forEach(cmd => {\n        if (cmd.isVisible === '1' && cmd.logicalId !== 'currentMode') {\n          modes.push({\n            id: cmd.id,\n            name: cmd.name,\n            order: cmd.order,\n          });\n        }\n      });\n\n      const currentModeValue = cmds.find(el => (el.logicalId === 'currentMode')).currentValue;\n      const currentMode = modes.find(mode => (mode.name === currentModeValue));\n\n      return {\n        ...state,\n        [action.payload.id]: {\n          id: action.payload.id,\n          currentMode: currentMode,\n          modes: modes,\n          loading: false,\n          error: false,\n        }\n      };\n    \n    case MODE_CHANGE_REQUESTED:\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...state[action.payload.id],\n          loading: true,\n        }\n      }\n    \n    case MODE_CHANGE_ERRORED:\n        return {\n          ...state,\n          [action.payload.id]: {\n            ...state[action.payload.id],\n            loading: false,\n          }\n        }\n    \n    case MODE_CHANGE_SUCCEEDED:\n      return {\n        ...state,\n        [action.payload.id]: {\n          ...state[action.payload.id],\n          loading: false,\n          error: false,\n        }\n      }\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function modeListRequested(id) {\n  return { type: MODE_LIST_REQUESTED, id: id }\n}\nexport function modeListLoaded(payload) {\n  return {\n    type: MODE_LIST_LOADED,\n    payload: {\n      id: payload.id,\n      equipment: payload.equipment,\n    }\n  }\n}\nexport function modeListErrored(payload) {\n  return {\n    type: MODE_LIST_ERRORED,\n    payload: {\n      id: payload.id,\n      error: payload.error,\n    }\n  }\n}\nexport function modeChangeRequested(payload) {\n  return { type: MODE_CHANGE_REQUESTED,\n    payload: {\n      id: payload.id,\n      cmd: payload.cmd,\n    }\n  }\n}\nexport function modeChangeSucceeded(payload) {\n  return { type: MODE_CHANGE_SUCCEEDED,\n    payload: {\n      id: payload.id,\n      cmd: payload.cmd,\n    }\n  }\n}\nexport function modeChangeErrored(payload) {\n  return { type: MODE_CHANGE_ERRORED,\n    payload: {\n      id: payload.id,\n      cmd: payload.cmd,\n      error: payload.error,\n    }\n  }\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(MODE_LIST_REQUESTED, modeListRequestSaga);\n  yield takeEvery(MODE_CHANGE_REQUESTED, modeChangeRequestSaga);\n}\n\nexport function* modeListRequestSaga(action) {\n  try {\n    const equipment = yield call(getJeedomEquipment, action.id);\n    yield put(modeListLoaded({\n      id: action.id,\n      equipment\n    }));\n  } catch (e) {\n    yield put(modeListErrored({\n      id: action.id,\n      error: e,\n    }));\n  }\n}\n\nexport function* modeChangeRequestSaga(action) {\n  try {\n    yield call(execJeedomCmd, action.payload.cmd);\n    yield delay(REFRESH_DELAY);\n    yield put(modeChangeSucceeded({\n      id: action.payload.id,\n      cmd: action.payload.cmd,\n    }));\n  } catch (e) {\n    yield put(modeChangeErrored({\n      id: action.payload.id,\n      cmd: action.payload.cmd,\n      error: e,\n    }));\n    yield put(showErrorSnackbar(SNACKBAR_ERROR));\n  } finally {\n    yield put(modeListRequested(action.payload.id));\n  }\n}\n","import { takeEvery, takeLeading, call, put, delay } from 'redux-saga/effects';\nimport { getJeedomEquipment, execJeedomCmd } from '../utils/jeedom';\nimport { showErrorSnackbar } from './snackbar';\n\nexport const CHANGE_MODE_REFRESH_DELAY = 1000;\nexport const CHANGE_MODE_ERROR_SNACKBAR = \"Erreur lors du changement de mode du thermostat !\"\n\n// Actions\nexport const THERMOSTAT_REQUESTED = 'THERMOSTAT_REQUESTED';\nexport const THERMOSTAT_LOADED = 'THERMOSTAT_LOADED';\nexport const THERMOSTAT_ERRORED = 'THERMOSTAT_ERRORED';\nexport const THERMOSTAT_MODE_CHANGE_REQUESTED = 'THERMOSTAT_MODE_CHANGE_REQUESTED';\nexport const THERMOSTAT_MODE_CHANGE_ERRORED = 'THERMOSTAT_MODE_CHANGE_ERRORED';\nexport const THERMOSTAT_MODE_CHANGE_SUCCEEDED = 'THERMOSTAT_MODE_CHANGE_SUCCEEDED';\n\n// Reducer\nconst initialState = {};\n\nexport default function reducer(state = initialState, action = {}) {\n  let id;\n  switch (action.type) {\n    case THERMOSTAT_REQUESTED:\n      if (!action.id) {\n        return { ...state };\n      }\n\n      return {\n        ...state,\n        [action.id]: {\n          ...state[action.id],\n          id: action.id,\n          loading: true,\n          error: false,\n        },\n      };\n\n    case THERMOSTAT_LOADED:\n      id = action.payload.id;\n\n      if (!id || !action.payload.thermostat) {\n        return { ...state };\n      }\n\n      let loadedThermostat = action.payload.thermostat;\n      loadedThermostat.loading = false;\n      loadedThermostat.error = false;\n      return {\n        ...state,\n        [id]: loadedThermostat,\n      };\n\n    case THERMOSTAT_ERRORED:\n      id = action.payload.id;\n\n      if (!id) {\n        return { ...state };\n      }\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          id: id,\n          loading: false,\n          error: true,\n        },\n      };\n    \n    case THERMOSTAT_MODE_CHANGE_REQUESTED:\n      id = action.payload.id;\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          loading: true,\n          error: false,\n        },\n      };\n    \n    case THERMOSTAT_MODE_CHANGE_ERRORED:\n      id = action.payload.id;\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          loading: false,\n          error: true,\n        },\n      };\n    \n    case THERMOSTAT_MODE_CHANGE_SUCCEEDED:\n      id = action.payload.id;\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          loading: false,\n          error: false,\n        },\n      };\n\n    default: return state;\n  }\n}\n\n// Action Creators\nexport function thermostatRequested(id) {\n  return { type: THERMOSTAT_REQUESTED, id}\n}\nexport function thermostatLoaded(payload) {\n  return {\n    type: THERMOSTAT_LOADED,\n    payload: { \n      id: payload.id,\n      thermostat: payload.thermostat\n    }\n  }\n}\nexport function thermostatErrored(payload) {\n  return {\n    type: THERMOSTAT_ERRORED,\n    payload: {\n      id: payload.id,\n      error: payload.error,\n    }\n  };\n}\nexport function thermostatModeChangeRequested(payload) {\n  return {\n    type: THERMOSTAT_MODE_CHANGE_REQUESTED,\n    payload: {\n      id: payload.id,\n      cmd: payload.cmd,\n    }\n  };\n}\nexport function thermostatModeChangeErrored(payload) {\n  return {\n    type: THERMOSTAT_MODE_CHANGE_ERRORED,\n    payload: {\n      id: payload.id,\n      cmd: payload.cmd,\n      error: payload.error,\n    }\n  };\n}\nexport function thermostatModeChangeSucceded(payload) {\n  return {\n    type: THERMOSTAT_MODE_CHANGE_SUCCEEDED,\n    payload: {\n      id: payload.id,\n      cmd: payload.cmd,\n    }\n  };\n}\n\n// Side effects\nexport function* saga() {\n  yield takeEvery(THERMOSTAT_REQUESTED, thermostatRequestSaga);\n  yield takeLeading(THERMOSTAT_MODE_CHANGE_REQUESTED, thermostatModeChangeRequestSaga);\n}\n\nexport function* thermostatRequestSaga(action) {\n  const thermostatId = action.id;\n\n  try {\n    const equipment = yield call(getJeedomEquipment, thermostatId);\n\n    // Name\n    const thermostatName = equipment.name;\n    // Modes\n    const availableModes = equipment.cmds.filter(el => (\n      el.generic_type === 'THERMOSTAT_SET_MODE' && el.isVisible === '1'\n    ));\n    let thermostatModes = [];\n    availableModes.forEach(mode => {\n      thermostatModes.push({\n        id: mode.id,\n        name: mode.name,\n        order: mode.order,\n      })\n    });\n    // Current mode\n    const currentMode = equipment.cmds.find(el => (\n      el.logicalId === 'mode'\n    ));\n    const thermostatCurrentMode = thermostatModes.find(mode => mode.name === currentMode.currentValue);\n    // Power\n    const thermostatPower = equipment.cmds.find(el => (\n      el.logicalId === 'power'\n    ));\n    // Temeprature\n    const thermostatTemperature = equipment.cmds.find(el => (\n      el.logicalId === 'temperature'\n    ));\n    // SetPoint\n    const thermostatSetPoint = equipment.cmds.find(el => (\n      el.logicalId === 'order'\n    ));\n\n    if (!thermostatName || !thermostatPower || !thermostatTemperature || !thermostatSetPoint) {\n      throw new TypeError('Error when parsing thermostat');\n    }\n\n    const thermostat = {\n      id: thermostatId,\n      name: thermostatName,\n      modes: thermostatModes,\n      currentMode: thermostatCurrentMode,\n      power: thermostatPower.currentValue,\n      temperature: thermostatTemperature.currentValue,\n      setpoint: thermostatSetPoint.currentValue,\n    }\n\n    const payload = {\n      id: thermostatId,\n      thermostat: thermostat,\n    }\n    yield put(thermostatLoaded(payload));\n  } catch (e) {\n    yield put(thermostatErrored({\n      id: thermostatId,\n      error: e,\n    }));\n  }\n}\n\n\nexport function* thermostatModeChangeRequestSaga(action) {\n  const { id, cmd } = action.payload;\n\n  try {\n    yield call(execJeedomCmd, cmd);\n    yield delay(CHANGE_MODE_REFRESH_DELAY);\n  } catch (error) {\n    yield put(thermostatModeChangeErrored({id, cmd, error }));\n    yield put(showErrorSnackbar(CHANGE_MODE_ERROR_SNACKBAR));\n  } finally {\n    yield put(thermostatRequested(id));\n  }\n}\n","import { createStore, applyMiddleware, compose, combineReducers  } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport { spawn } from 'redux-saga/effects';\n\nimport launchScreen, { saga as launchScreenSaga } from './modules/launchScreen';\nimport settingsForm, { saga as settingsFormSaga } from './modules/settingsForm';\nimport settings, { saga as settingsSaga }  from './modules/settings';\nimport snackbar, { saga as snackBarSaga } from './modules/snackbar';\nimport summary, { saga as summarySaga } from './modules/summary';\nimport room, { saga as roomSaga } from './modules/room';\nimport camera, { saga as cameraSaga } from './modules/camera';\nimport light, { saga as lightSaga } from './modules/light';\nimport door, { saga as doorSaga } from './modules/door';\nimport mode, { saga as modeSaga } from './modules/mode';\nimport thermostat, { saga as thermostatSaga } from './modules/thermostat';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst storeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst rootReducer = combineReducers({\n  launchScreen,\n  settingsForm,\n  settings,\n  snackbar,\n  summary,\n  room,\n  camera,\n  light,\n  door,\n  mode,\n  thermostat,\n});\n\nfunction* rootSaga() {\n  yield spawn(launchScreenSaga);\n  yield spawn(settingsFormSaga);\n  yield spawn(settingsSaga);\n  yield spawn(snackBarSaga);\n  yield spawn(summarySaga);\n  yield spawn(roomSaga);\n  yield spawn(cameraSaga);\n  yield spawn(lightSaga);\n  yield spawn(doorSaga);\n  yield spawn(modeSaga);\n  yield spawn(thermostatSaga);\n}\n\nconst store = createStore(\n  rootReducer,\n  storeEnhancers(\n    applyMiddleware(sagaMiddleware)\n  )\n);\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { saveSettingsForm } from '../../redux/modules/settingsForm';\nimport { getStorageSettings } from '../../redux/utils/storage';\n\nexport class SettingsForm extends Component {\n  constructor() {\n    super();\n\n    this.state = {url: '', apikey: '' };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    getStorageSettings().then((settings) => {\n      this.setState({\n        url: settings.url,\n        apikey: settings.apikey,\n      })\n    });\n  }\n\n  handleChange(event) {\n    this.setState({ [event.target.id]: event.target.value });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    this.props.saveSettingsForm({\n      url: this.state.url,\n      apikey: this.state.apikey,\n      onSuccess: this.props.onSuccess,\n    });\n  }\n\n  render() {\n    const errorCheck = this.props.checkFailed ?\n      <div className=\"alert alert-danger\" role=\"alert\">URL ou Clef d'API invalide !</div>\n      : '';\n    const errorSave = this.props.saveFailed ?\n      <div className=\"alert alert-danger\" role=\"alert\">Erreur lors de la sauvegarde !</div>\n      : '';\n    \n    const button = this.props.saveRequested ?\n      <button type=\"button\" className=\"btn btn-secondary btn-lg btn-block\" disabled>Enregistrement</button>\n      : <button type=\"submit\" className=\"btn btn-primary btn-lg btn-block\">Sauvegarder</button>\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"url\">Jeedom URL</label>\n          <input type=\"text\" className=\"form-control\" id=\"url\" value={this.state.url} onChange={this.handleChange} />\n          <small className=\"form-text text-muted\">URL publique d'accès à Jeedom.</small>\n        </div>\n        \n        <div className=\"form-group\">\n          <label htmlFor=\"apikey\">Clef d'API Jeedom</label>\n          <input type=\"text\" className=\"form-control\" id=\"apikey\" value={this.state.apikey} onChange={this.handleChange} />\n          <small className=\"form-text text-muted\">Configuration > API > Clef API</small>\n        </div>\n\n        {errorCheck}\n        {errorSave}\n\n        {button}\n      </form>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { settingsForm } = state;\n\n  return settingsForm;\n}\n\nexport default connect(\n  mapStateToProps,\n  { saveSettingsForm },\n)(SettingsForm);\n","import React from 'react';\nimport SettingsForm from '../../containers/SettingsForm/SettingsForm';\n\nimport loaderSvg from './loader.svg';\nimport './LaunchScreen.scss';\n\nfunction LaunchScreen(props) {\n  const loader = !props.showSetup ?\n      <img className=\"loader\" src={loaderSvg} width=\"50\" alt=\"\" />\n      : '';\n    \n  const settingsForm = props.showSetup ?\n    <SettingsForm onSuccess=\"props.onSuccess\" />\n    : '';\n\n  return (\n    <div className=\"launchScreen position-fixed\">\n      <div className=\"container fixed-bottom\">\n        <h1>Bienvenue,</h1>\n        { loader }\n        { settingsForm }\n      </div>\n    </div>\n  )\n};\n\nexport default LaunchScreen;\n","import React from 'react';\nimport './Pill.scss';\n\nfunction Pill(props) {\n  const pillImageUrl = props.image;\n  let pillImage = '';\n  if (pillImageUrl) {\n    const pillImgStyle = {\n      backgroundImage: 'url(' + pillImageUrl + ')'\n    };\n    let pillClassName = ['pill-img'];\n    if (props.text) {\n      pillClassName.push('pill-img-with-text');\n    }\n    else {\n      pillClassName.push('pill-img-no-text');\n    }\n\n    pillImage = <span className={pillClassName.join(' ')} style={pillImgStyle}>&nbsp;</span>;\n  }\n  \n  return (\n    <span>\n      <span className=\"pill\">\n        {pillImage}\n        {props.text}\n      </span>&nbsp;\n    </span>\n  );\n}\n\nexport default Pill;\n","import React from 'react';\nimport Pill from '../Pill/Pill';\nimport imgSun from './sun.svg';\nimport imgRain from './rain.svg';\nimport imgLight from './light.svg';\n\nfunction Summary(props) {\n  const outsideImage = props.summary.outsideRain > 0 ? imgRain : imgSun;\n  const light = props.summary.light ? <Pill image={imgLight} /> : '';\n\n  return (\n    <h5 className=\"house-summary\">\n      <Pill text={props.summary.homeTemperature + '°'} />\n      <Pill image={outsideImage} text={props.summary.outsideTemperature + '°'} />\n      {light}\n    </h5>\n  );\n}\n\nexport default Summary;","import React from 'react';\nimport './Header.scss';\nimport Summary from '../Summary/Summary';\n\nfunction Header(props) {\n  const collapsedClassName = props.collapsed ? ' app-header-collapsed' : '';\n\n  return (\n    <header className={\"app-header\" + collapsedClassName}>\n      <div className=\"container\">\n        <a href=\"#Settings\" className=\"settings-show text-hide\" onClick={props.onShowSettings}>Paramètres</a>\n\n        <h1>Salut,</h1>\n        <h3>Tout va bien à la maison</h3>\n        <Summary summary={props.summary} />\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\nimport './Card.scss';\n\nfunction Card(props) {\n  const cssClass = ['card'];\n  if (props.error) {\n    cssClass.push('border-danger');\n  }\n\n  const style = {\n    backgroundImage: 'url(' + props.backgroundUrl + ')',\n    backgroundSize: 'cover',\n  };\n\n  const imgTop = props.imgTop ?\n    <img className='card-img-top' src={props.imgTop} alt='' />\n    : '';\n  const imgBottom = props.imgBottom ?\n    <img className='card-img-top' src={props.imgBottom} alt='' />\n    : '';\n  \n  const overlay = props.overlay ? \n    <div className=\"card-img-overlay\"><p className=\"card-text text-center\">{props.overlay}</p></div>\n    : '';\n\n  const hasChildren = props.children ? 'has-children' : 'no-child';\n\n  return (\n    <div className={cssClass.join(' ')} style={style}>\n      {imgTop}\n      {overlay}\n      <div className=\"card-body\">\n        <h5 className={'card-title ' + hasChildren}>{props.title}</h5>\n        {props.children}\n      </div>\n      {imgBottom}\n    </div>\n  );\n}\n\nexport default Card;\n","import React, { Component } from 'react';\nimport Card from '../Card/Card';\n\nexport class CardCamera extends Component {\n  constructor() {\n    super();\n    this.state = {\n      time: Date.now()\n    };\n  }\n\n  componentDidMount() {\n    //setInterval(() => this.setState({ time: Date.now() }), 10000);\n  }\n\n  render() {\n    return (\n      <Card\n        title={this.props.title}\n        imgTop={this.props.cameraImage + '&time=' + this.state.time}\n        overlay={this.props.overlay}>\n        {this.props.children}\n      </Card>\n    )\n  }\n}\n\nexport default CardCamera;\n","import React, { Component } from 'react';\nimport './Backdrop.scss';\n\nexport class Backdrop extends Component {\n  constructor() {\n    super();\n    this.state = {\n      show: false\n    };\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.setState({show: true})\n    }, 1);\n  }\n\n  handleClose(event) {\n    event.preventDefault();\n    this.setState({show: false});\n    if (this.props.onClose) {\n      setTimeout(() => {\n        this.props.onClose();\n      }, 350);\n    }\n  }\n\n  render() {\n    const cssClass = this.state.show ? ' backdrop-show' : ' backdrop-hide';\n\n    return (\n      <div className={'backdrop settings-backdrop ' + cssClass}>\n        <div className=\"backdrop-background\" onClick={this.handleClose}></div>\n        <div className=\"backdrop-wrapper\">\n          <div className=\"container\">\n            <div className=\"row justify-content-center\">\n              <div className=\"col-12 col-lg-10 col-xl-9 backdrop-content\">\n                <h3>{this.props.title}</h3>\n                <a href=\"#App\" className=\"backdrop-close text-hide\" onClick={this.handleClose}>Fermer</a>\n                <hr/>\n                <div className=\"backdrop-content-scroll\">\n                  {this.props.children}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Backdrop;\n","import React from 'react';\n\nimport Backdrop from '../Backdrop/Backdrop';\n\nconst HISTORY_LENGTH = 20;\n\nfunction formatHistoryListItem(element, i) {\n  const badgeClassName = element.open ? 'badge-danger' : 'badge-success';\n\n  return (\n    <li className=\"list-group-item d-flex justify-content-between align-items-center\" key={i}>\n      {element.datetime.toFormat('dd/LL/yyyy HH:mm:ss')}\n      <span className={\"badge badge-pill \" + badgeClassName}>\n        {element.open ? 'Ouvert' : 'Fermé'}\n      </span>\n    </li>\n  );\n}\n\nfunction BackdropDoorHistory(props) {\n  if (!props.history) {\n    return '';\n  }\n\n  const historyList = props.history.slice(0, HISTORY_LENGTH).map(formatHistoryListItem);\n\n  return (\n    props.show ?\n      <Backdrop title={props.title} onClose={props.onClose}>\n        <ul className=\"list-group list-group-flush\">\n          {historyList}\n        </ul>\n      </Backdrop>\n    : ''\n  );\n}\n\nexport default BackdropDoorHistory;\n","export function formatDoorDate(object, door) {\n  if (!door) {\n    return object + ' est dans un état indéterminée';\n  }\n\n  const status = door.open ? 'ouvert' : 'fermé';\n\n  if (!door.history || door.history.length === 0) {\n    return object + ' est ' + status + ' depuis une période indéterminée';\n  }\n  \n  let duration;\n  let diff = door.history[0].datetime.diffNow().negate();\n  if (diff.toFormat('d') > 1) {\n    duration = diff.toFormat('d') +' jours';\n  } else if (diff.toFormat('d') > 0) {\n    duration = '1 jour';\n  } else if (diff.toFormat('h') > 1) {\n    duration = diff.toFormat('h') + ' heures';\n  } else if (diff.toFormat('h') > 0) {\n    duration = '1 heure';\n  } else if (diff.toFormat('m') > 1) {\n    duration = diff.toFormat('m') + ' minutes';\n  } else if (diff.toFormat('m') > 0) {\n    duration = '1 minute';\n  } else {\n    duration = \"moins d'une minute\";\n  }\n\n  return object + ' est ' + status + ' depuis ' + duration + '.';\n}","import React from 'react';\nimport CardCamera from '../CardCamera/CardCamera';\nimport BackdropDoorHistory from '../BackdropDoorHistory/BackdropDoorHistory';\nimport { formatDoorDate } from '../utils';\n\nfunction CardCameraGarage(props) {\n  const status = formatDoorDate('Le garage', props.door);\n\n  const overlay = props.door && props.door.loading ? 'Chargement...' : '';\n\n  return (\n    <CardCamera\n      title=\"Garage\"\n      cameraImage={props.cameraImage}\n      overlay={overlay}>\n      <p className=\"card-text\">{status}</p>\n      <div className=\"text-right\">\n        {props.onHistoryClick ? <button className=\"btn btn-link\" onClick={props.onHistoryClick}>Historique</button> : ''}\n        <button className=\"btn btn-primary\">Actioner</button>\n      </div>\n\n      <BackdropDoorHistory\n        title=\"Historique\"\n        show={props.door && props.door.showHistory}\n        onClose={props.onHistoryBackdropClose}\n        history={props.door && props.door.history ? props.door.history : null} />\n    </CardCamera>\n  );\n}\n\nexport default CardCameraGarage;\n","import React from 'react';\nimport Card from '../Card/Card';\nimport BackdropDoorHistory from '../BackdropDoorHistory/BackdropDoorHistory';\nimport { formatDoorDate } from '../utils';\n\nfunction CardDoor(props) {\n  const overlay = props.door && props.door.loading ? 'Chargement...' : '';\n  const status = formatDoorDate('La porte', props.door);\n\n  return (\n    <Card\n      title={props.title}\n      overlay={overlay}>\n      <p className=\"card-text\">{status}</p>\n      <div className=\"text-right\">\n        {props.onHistoryClick ? <button className=\"btn btn-link\" onClick={props.onHistoryClick}>Historique</button> : ''}\n      </div>\n\n      <BackdropDoorHistory\n        title=\"Historique\"\n        show={props.door && props.door.showHistory}\n        onClose={props.onHistoryBackdropClose}\n        history={props.door && props.door.history ? props.door.history : null} />\n    </Card>\n  );\n}\n\nexport default CardDoor;\n","import React from 'react';\nimport Card from '../Card/Card';\n\nfunction CardLights(props) {\n  const lightsOn = props.lights.filter((light) => (light.value === 1));\n  \n  let text = 'Le statut des lumières est indéterminé !';\n\n  if (lightsOn.length === 0) {\n    text = 'Toutes les lumières sont éteintes.';\n  }\n  if (lightsOn.length === 1) {\n    text = 'La lumière ' + lightsOn[0].singularComplement + ' ' + lightsOn[0].label + ' est allumée.';\n  }\n  if (lightsOn.length > 1) {\n    text = 'Les lumières ' + lightsOn.reduce((labels, item) => labels + item.label + ', ', '') + ' sont allumées.';\n  }\n\n  const overlay = props.loading ? 'Chargement...' : '';\n\n  if (props.error) {\n    return (\n      <Card title={props.title} error overlay={overlay}>\n        <p className=\"card-text\">Oups une erreur est survenue dans la récupération de l'état des lumières !</p>\n        <div className=\"text-right\">\n          <button className=\"btn btn-primary\" onClick={props.onRetry}>Ré-essayer</button>\n        </div>\n      </Card>\n    )\n  }\n\n  return (\n    <Card title=\"Lumières\" overlay={overlay}>\n      <p className=\"card-text\">{text}</p>\n      <div className=\"text-right\">\n        <button className=\"btn btn-primary\" onClick={props.onOffClick}>Tout éteindre</button>\n      </div>\n    </Card>\n  );\n}\n\nexport default CardLights;\n","import React from 'react';\nimport Card from '../Card/Card';\n\nfunction CardMode(props) {\n  if (!props.mode) {\n    return '';\n  }\n\n  const modes = props.mode.modes;\n  const currentModeName = props.mode.currentMode ? props.mode.currentMode.name : 'Indéterminé';\n\n  const onModeClickFactory = (equipmentId, cmdId) => (\n    (e) => {\n      e.preventDefault();\n      const payload = {\n        id: equipmentId,\n        cmd: cmdId,\n      };\n      props.onModeClick(payload);\n    }\n  );\n\n  let buttons = '';\n  if (modes) {\n    buttons = modes.map(mode => {\n      const disabled = mode.id === props.mode.currentMode.id;\n\n      return (<button\n        type=\"button\"\n        className=\"btn btn-primary\"\n        onClick={onModeClickFactory(props.mode.id, mode.id)}\n        disabled={disabled}\n        key={mode.id}>\n        {mode.name}\n      </button>)\n    });\n  }\n\n  const overlay = props.loading ? 'Chargement...' : '';\n\n  if (props.error) {\n    return (\n      <Card title={props.title} error overlay={overlay}>\n        <p className=\"card-text\">Oups une erreur est survenue dans la récupération des modes !</p>\n        <div className=\"text-right\">\n          <button className=\"btn btn-primary\" onClick={props.onRetry}>Ré-essayer</button>\n        </div>\n      </Card>\n    )\n  }\n\n  return (\n    <Card title={props.title} overlay={overlay}>\n      <p className=\"card-text\">Actuellement en mode <strong>{currentModeName}</strong>.</p>\n      <div className=\"text-center\">\n        <div className=\"btn-group\" role=\"group\" aria-label=\"Modes\">\n          {buttons}\n        </div>\n      </div>\n    </Card>\n  );\n}\n\nexport default CardMode;\n","import React from 'react';\nimport Card from '../Card/Card';\n\nfunction CardWeather(props) {\n  return (\n    <Card title={props.title}>\n      <div className=\"row align-items-center\">\n        <div className=\"col-5 order-12 text-center\">\n          <h2>{props.temperature}°</h2>\n          <small>Historique</small>\n        </div>\n        <ul className=\"col-7 order-1 list-unstyled\">\n          <li>Humidité : 23%</li>\n          <li>CO2: 443ppm</li>\n          <li>Bruit: 38dB</li>\n        </ul>\n      </div>\n      {props.children}\n    </Card>\n  );\n}\n\nexport default CardWeather;\n","import React, { Component } from 'react';\nimport CardWeather from '../CardWeather/CardWeather';\nimport Card from '../Card/Card';\n\n\nexport class CardThermostat extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      showPower: true,\n      showButtons: false,\n      modeIndex: this.defaultModeIndex(),\n    };\n    \n    this.handleChangeCancel = this.handleChangeCancel.bind(this);\n    this.handleChangeMode = this.handleChangeMode.bind(this);\n    this.handleOnChange = this.handleOnChange.bind(this);\n  }\n\n  defaultModeIndex() {\n    let modeIndex = 0;\n    if (this.props && this.props.thermostat && this.props.thermostat.modes) {\n      modeIndex = this.props.thermostat.modes.indexOf(this.props.thermostat.currentMode);\n    }\n\n    return modeIndex;\n  }\n\n  handleChangeMode(e) {\n    const mode = this.props.thermostat.modes[this.state.modeIndex];\n    this.props.onModeChange({\n      id: this.props.thermostat.id,\n      cmd: mode.id,\n    });\n  }\n\n  handleChangeCancel(e) {\n    this.setState({\n      modeIndex: this.defaultModeIndex(),\n      showPower: true,\n      showButtons: false,\n    })\n  }\n\n  handleOnChange(e) {\n    e.preventDefault();\n\n    const step = e.target.value;\n    this.setState({modeIndex: step});\n\n    if (this.props.thermostat.modes[step].id === this.props.thermostat.currentMode.id) {\n      this.setState({\n        showPower: true,\n        showButtons: false,\n      });\n    }\n    else {\n      this.setState({\n        showPower: false,\n        showButtons: true,\n      });\n    }\n  }\n\n  render() {\n    if (!this.props.thermostat) {\n      return '';\n    }\n\n    if (this.props.thermostat.loading || this.props.thermostat.modes === undefined) {\n      return <Card title={this.props.title} overlay='Chargement ...'></Card>\n    }\n\n    if (this.props.thermostat.error) {\n      return <Card title={this.props.title}>Erreur à gérer</Card>\n    }\n\n    const thermostatId = this.props.thermostat.id;\n\n    const modes = this.props.thermostat.modes;\n\n    let datalistOptions = [];\n    const optionSize = Math.floor(12 / modes.length);\n    modes.forEach((mode) => {\n      datalistOptions.push(<option className={'col-' + optionSize} value={mode.id} label={mode.name} key={mode.id} />);\n    })\n      \n    const power = this.props.thermostat.power > 0 ?\n      <span>Chauffe actuellement à {this.props.thermostat.power} %</span> : \n      <span>Ne chauffe pas actuellement</span>\n\n    const changeButtons = <div>\n      <button className=\"btn btn-sm btn-primary\" onClick={this.handleChangeMode}>Valider</button>\n      <button className=\"btn btn-sm\" onClick={this.handleChangeCancel}>Annuler</button>\n    </div>;\n\n    return (\n      <CardWeather\n        title={this.props.title}\n        temperature={this.props.thermostat.temperature}>\n        <div>\n          <hr />\n          <div className=\"form-group text-center\">\n          <label htmlFor={'thermostat-'+ thermostatId}>Thermostat</label>\n          <datalist id={'thermostat-marks-'+ thermostatId} className=\"row text-center\">\n            {datalistOptions}\n          </datalist>\n          <input\n            type=\"range\"\n            className=\"custom-range\"\n            id={'thermostat-'+ thermostatId}\n            min=\"0\"\n            max={modes.length - 1}\n            step=\"1\"\n            value={this.state.modeIndex}\n            list={'thermostat-marks-'+ thermostatId}\n            onChange={this.handleOnChange} />\n        \n            <div className=\"form-text\">\n              {this.state.showPower ? power : ''}\n              {this.state.showButtons ? changeButtons : ''}\n            </div>\n          </div>\n        </div>\n      </CardWeather>\n    );\n  }\n}\n\nexport default CardThermostat;\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport CardCamera from '../../components/CardCamera/CardCamera';\nimport CardCameraGarage from '../../components/CardCameraGarage/CardCameraGarage';\nimport CardDoor from '../../components/CardDoor/CardDoor';\nimport CardLight from '../../components/CardLights/CardLights';\nimport CardMode from '../../components/CardMode/CardMode';\nimport CardThermostat from '../../components/CardThermostat/CardThermostat';\nimport { allLightStatusRequested, allLightsOffRequested } from '../../redux/modules/light';\nimport { doorStatusWithHistoryRequested, doorHistoryShow, doorHistoryHide } from '../../redux/modules/door';\nimport { modeListRequested, modeChangeRequested } from \"../../redux/modules/mode\";\nimport { HOUSE_MODE_ID, LIVING_CAMERA_ID, GARAGE_CAMERA_ID, LIVING_THERMOSTAT_ID } from '../../constants/equipments';\nimport { GARAGE_DOOR_CMD, ENTRY_DOOR_CMD } from '../../constants/commands';\nimport { cameraImageRequested } from '../../redux/modules/camera';\nimport { thermostatRequested, thermostatModeChangeRequested } from '../../redux/modules/thermostat';\n\nexport class CardList extends Component {\n  constructor() {\n    super();\n\n    this.handleHouseModeRetry = this.handleHouseModeRetry.bind(this);\n    this.handleLightStatusRetry = this.handleLightStatusRetry.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.getAllLightStatus();\n    this.props.getDoorStatusHistory({id: GARAGE_DOOR_CMD});\n    this.props.getDoorStatusHistory({id: ENTRY_DOOR_CMD});\n    this.props.getCameraImage(GARAGE_CAMERA_ID);\n    this.props.getCameraImage(LIVING_CAMERA_ID);\n    this.props.getMode(HOUSE_MODE_ID);\n    this.props.getThermostat(LIVING_THERMOSTAT_ID);\n  }\n\n  handleHouseModeRetry() {\n    this.props.getMode(HOUSE_MODE_ID);\n  }\n\n  handleLightStatusRetry() {\n    this.props.getAllLightStatus();\n  }\n\n  formatModeToProps(mode) {\n    return '' + mode.id + '|' + mode.name\n  };\n  getCurrentMode(modeState) {\n    if (!modeState || !modeState.currentMode) {\n      return '|...';\n    }\n  \n    return this.formatModeToProps(modeState.currentMode)\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"card-columns\">\n          <CardLight\n            error={this.props.lights.error}\n            loading={this.props.lights.loading}\n            lights={this.props.lights.lights}\n            onOffClick={this.props.handleLightOffClick}\n            onRetry={this.handleLightStatusRetry} />\n\n          <CardCameraGarage\n            title=\"Garage\"\n            cameraImage={this.props.garageCameraImage}\n            door={this.props.garageDoor}\n            onHistoryClick={() => { this.props.handleDoorHistoryClick(GARAGE_DOOR_CMD) }}\n            onHistoryBackdropClose={() => { this.props.handleHistoryBackdropClose(GARAGE_DOOR_CMD)}} />\n          \n          <CardDoor\n            title=\"Entrée\"\n            door={this.props.enrtyDoor}\n            onHistoryClick={() => { this.props.handleDoorHistoryClick(ENTRY_DOOR_CMD) }}\n            onHistoryBackdropClose={() => { this.props.handleHistoryBackdropClose(ENTRY_DOOR_CMD)}} />\n\n          <CardCamera\n            title=\"Séjour\"\n            cameraImage={this.props.livingCameraImage} />\n\n          <CardMode\n            title=\"Maison\"\n            mode={this.props.houseMode}\n            onModeClick={this.props.handleChangeMode}\n            onRetry={this.handleHouseModeRetry} />\n\n          <CardThermostat\n            title=\"Environnement\"\n            thermostat={this.props.livingThermostat}\n            onModeChange={this.props.handleThermostatModeChange} />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  lights: state.light,\n  garageDoor: state.door[GARAGE_DOOR_CMD],\n  enrtyDoor: state.door[ENTRY_DOOR_CMD],\n  garageCameraImage: state.camera[GARAGE_CAMERA_ID],\n  livingCameraImage: state.camera[LIVING_CAMERA_ID],\n  houseMode: state.mode[HOUSE_MODE_ID],\n  livingThermostat: state.thermostat[LIVING_THERMOSTAT_ID]\n});\n\nconst mapDispatchToProps = {\n  getAllLightStatus: allLightStatusRequested,\n  getDoorStatusHistory: doorStatusWithHistoryRequested,\n  handleDoorHistoryClick: doorHistoryShow,\n  handleHistoryBackdropClose: doorHistoryHide,\n  handleLightOffClick: allLightsOffRequested,\n  getCameraImage: cameraImageRequested,\n  getMode: modeListRequested,\n  handleChangeMode: modeChangeRequested,\n  getThermostat: thermostatRequested,\n  handleThermostatModeChange: thermostatModeChangeRequested,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CardList);\n","import React from 'react';\nimport './Room.scss';\n\nfunction Room(props) {\n  return (\n    <div className=\"col-6 col-md-4 col-lg-3\">\n      <div className=\"card room\">\n        {props.name}\n      </div>\n    </div>\n  );\n}\n\nexport default Room;\n","import React from 'react';\nimport Room from '../Room/Room';\nimport './RoomList.scss';\n\nfunction RoomList(props) {\n  const error = props.error ?\n    <div className=\"alert alert-danger\" role=\"alert\">\n      Erreur lors de la récupération des pièces\n      <button type=\"button\" className=\"btn btn-link\" onClick={props.getRooms}>Réessayer</button>\n    </div>\n    : '';\n  const loading = props.loading ?\n    <div className=\"alert alert-light\" role=\"alert\">Récupération des pièces...</div>\n    : '';\n  const empty = (props.rooms.length === 0 && !props.error && !props.loading) ?\n    <div className=\"alert alert-info\" role=\"alert\">Aucune pièce de défini</div>\n    : '';\n  const list = (props.rooms.length > 0 && !props.error && !props.loading) ?\n    <div className=\"row\">\n      {props.rooms.map(room => (\n        <Room key={room.id} name={room.name} />\n      ))}\n    </div>\n    : '';\n    \n  return (\n    <div className=\"room-list-container\">\n      <div className=\"container\">\n        <div className=\"row room-list\">\n          <div className=\"col-12\">\n            <h3>Pièces</h3>\n            {loading}\n            {error}\n            {empty}\n            {list}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default RoomList;\n","import React from 'react';\n\nimport Backdrop from '../Backdrop/Backdrop';\nimport SettingsForm from '../../containers/SettingsForm/SettingsForm';\n\nfunction BackdropSettings(props) {\n  return (\n    props.show ?\n      <Backdrop title=\"Paramètres\" onClose={props.onClose}>\n        <SettingsForm onSuccess={props.onSuccess} />\n      </Backdrop>\n    : ''\n  );\n}\n\nexport default BackdropSettings;\n","import React from 'react';\nimport './Snackbar.scss';\n\nfunction Snackbar(props) {\n  const cssClass = props.text ? ' snackbar-show' : ' snackbar-hide';\n\n  return (\n    <div className={'container snackbar-container ' + cssClass}>\n      <div className=\"row\">\n        <div className=\"col-12 fixed-bottom\">\n          <div className={'snackbar alert alert-' + props.type} role=\"alert\">\n            {props.text}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Snackbar;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { showSettings, hideSettings, settingsFormSucceeded } from \"../../redux/modules/settings\";\nimport { appLaunchRequested, appLaunchSucceeded } from \"../../redux/modules/launchScreen\";\nimport { setSummaryIntervalRegistration } from \"../../redux/modules/summary\";\nimport { roomsRequested } from \"../../redux/modules/room\";\n\nimport LaunchScreen from '../../components/LaunchScreen/LaunchScreen';\nimport Header from '../../components/Header/Header';\nimport CardList from '../CardList/CardList';\nimport RoomList from '../../components/RoomList/RoomList';\nimport BackdropSettings from '../../components/BackdropSettings/BackdropSettings';\nimport Snackbar from '../../components/Snackbar/Snackbar';\n\nimport './App.scss';\n\nexport class App extends Component {\n  constructor() {\n    super();\n\n    this.state ={\n      collapsedHeader: false,\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  handleScroll(e) {\n    const threshold = 10.65 * parseFloat(getComputedStyle(document.documentElement).fontSize);\n\n    this.setState({collapsedHeader: window.scrollY > threshold});\n  }\n\n  componentDidMount() {\n    window.addEventListener('scroll', this.handleScroll);\n    this.props.appLaunchRequested();\n    this.props.setSummaryIntervalRegistration();\n    this.props.getRooms();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n\n  render() {\n    if (this.props.launchScreen.show) {\n      return (\n        <div className=\"App\" id=\"App\">\n          <LaunchScreen\n            showSetup={this.props.launchScreen.showSetup}\n            onSuccess={this.props.handleLaunchScreenSetupSuccess} />\n        </div>)\n    }\n\n    return (\n      <div className=\"App\" id=\"App\">\n        <Header \n          collapsed={this.state.collapsedHeader}\n          onShowSettings={this.props.handleShowSettings}\n          summary={this.props.summary} />\n\n        <CardList />\n\n        <RoomList\n          rooms={this.props.rooms.list}\n          loading={this.props.rooms.loading}\n          error={this.props.rooms.error} />\n        \n        <BackdropSettings\n          show={this.props.showSettingsBackdrop}\n          onClose={this.props.handleCloseSettings}\n          onSuccess={this.props.handleSettingsBackdropFormSuccess} />\n\n        <Snackbar text={this.props.snackbar.text} type={this.props.snackbar.type} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  launchScreen: state.launchScreen,\n  showSettingsBackdrop: state.settings.show,\n  summary: state.summary,\n  rooms: state.room,\n  snackbar: state.snackbar,\n});\n\nconst mapDispatchToProps = {\n  appLaunchRequested: appLaunchRequested,\n  handleShowSettings: showSettings,\n  handleCloseSettings: hideSettings,\n  handleLaunchScreenSetupSuccess: appLaunchSucceeded,\n  handleSettingsBackdropFormSuccess: settingsFormSucceeded,\n  setSummaryIntervalRegistration: setSummaryIntervalRegistration,\n  getRooms: roomsRequested,\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n//import store from './store/index';\nimport store from './redux/configureStore';\nimport './index.scss';\nimport App from './containers/App/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}