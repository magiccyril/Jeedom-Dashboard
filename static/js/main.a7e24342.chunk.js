(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{27:function(e,t,r){e.exports=r.p+"static/media/loader.27e2ef14.svg"},28:function(e,t,r){e.exports=r.p+"static/media/sun.3b2f1925.svg"},29:function(e,t,r){e.exports=r.p+"static/media/rain.5804a26e.svg"},30:function(e,t,r){e.exports=r.p+"static/media/light.9eee2013.svg"},32:function(e,t,r){e.exports=r(53)},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){},49:function(e,t,r){},50:function(e,t,r){},51:function(e,t,r){},52:function(e,t,r){},53:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(19),c=r.n(o),s=r(17),i=r(3),u=r.n(i),l=r(16),p=r(31),d=r(2);function m(e){return new Promise((function(t,r){try{localStorage.setItem("url",e.url),localStorage.setItem("apikey",e.apikey),t()}catch(a){r(a)}}))}function h(){return new Promise((function(e,t){try{e({url:localStorage.getItem("url"),apikey:localStorage.getItem("apikey")})}catch(r){t(r)}}))}var f="core/api/jeeApi.php";function y(){return Math.floor(Math.random()*Math.floor(100))}function v(e){var t={method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:y(),method:"version",params:{apikey:e.apikey}})};return fetch(e.url+f,t).then((function(e){return e.json()}))}function b(e){return h().then((function(t){var r={method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:y(),method:"eqLogic::fullById",params:{apikey:t.apikey,id:e}})},a=t.url+f;return fetch(a,r)})).then((function(e){return e.json()})).then((function(e){return e.result}))}function g(){return h().then((function(e){var t={method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:y(),method:"object::all",params:{apikey:e.apikey}})},r=e.url+f;return fetch(r,t)})).then((function(e){return e.json()})).then((function(e){return e.result}))}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h().then((function(r){var a={method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:y(),method:"cmd::execCmd",params:{apikey:r.apikey,id:e,options:t}})},n=r.url+f;return fetch(n,a)})).then((function(e){return e.json()})).then((function(e){return e.result}))}function E(e){return h().then((function(t){var r={method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:y(),method:"cmd::byId",params:{apikey:t.apikey,id:e}})},a=t.url+f;return fetch(a,r)})).then((function(e){return e.json()})).then((function(e){return e.result}))}function j(e){return h().then((function(t){var r={method:"POST",body:JSON.stringify({jsonrpc:"2.0",id:y(),method:"cmd::getHistory",params:{apikey:t.apikey,id:e}})},a=t.url+f;return fetch(a,r)})).then((function(e){return e.json()})).then((function(e){return e.result}))}var x=u.a.mark(D),k=u.a.mark(_),S="SETTINGS_FORM_SAVE_REQUESTED",w="SETTINGS_FORM_CHECK_FAILED",C="SETTINGS_FORM_SAVE_SUCCEEDED",R="SETTINGS_FORM_SAVE_FAILED",N={checkFailed:!1,saveRequested:!1,saveFailed:!1};function D(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.g)(S,_);case 2:case"end":return e.stop()}}),x)}function _(e){var t;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.a)(v,e.payload);case 3:if(!(t=r.sent).error){r.next=6;break}throw new Error(t.error.message);case 6:r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(d.c)((r.t0,{type:w}));case 12:return r.abrupt("return");case 13:return r.prev=13,r.next=16,Object(d.a)(m,e.payload);case 16:return r.next=18,Object(d.c)((a=e.payload,{type:C,payload:a}));case 18:if(!e.payload.onSuccess){r.next=21;break}return r.next=21,Object(d.c)(e.payload.onSuccess());case 21:r.next=27;break;case 23:return r.prev=23,r.t1=r.catch(13),r.next=27,Object(d.c)((r.t1,{type:R}));case 27:case"end":return r.stop()}var a}),k,null,[[0,8],[13,23]])}var T=u.a.mark(U),M=u.a.mark(q),A=u.a.mark(G),I="APP_LAUNCH_REQUESTED",H="APP_LAUNCH_SUCCEEDED",L="APP_LAUNCH_FAILED",P={show:!0,showSetup:!1};function F(){return{type:H}}function U(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.g)(I,q);case 2:return e.next=4,Object(d.f)(C,G);case 4:case"end":return e.stop()}}),T)}function q(){var e,t;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.a)(h);case 3:if((e=r.sent).url&&e.apikey){r.next=6;break}throw new Error("Settings undefined");case 6:return r.next=8,Object(d.a)(v,e);case 8:if(!(t=r.sent).error){r.next=11;break}throw new Error(t.error.message);case 11:return r.next=13,Object(d.c)(F());case 13:r.next=20;break;case 15:return r.prev=15,r.t0=r.catch(0),r.next=19,Object(d.c)((r.t0,{type:L}));case 19:return r.abrupt("return");case 20:case"end":return r.stop()}}),M,null,[[0,15]])}function G(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(F());case 2:case"end":return e.stop()}}),A)}var B=u.a.mark(X),V=u.a.mark(z),Q=1e4,J="SNACKBAR_SHOW",Y="SNACKBAR_HIDE",W={text:"",type:"success"};function K(e){return{type:J,payload:{text:e,type:"danger"}}}function X(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.g)(J,z);case 2:case"end":return e.stop()}}),B)}function z(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(Q);case 2:return e.next=4,Object(d.c)({type:Y});case 4:case"end":return e.stop()}}),V)}var $=u.a.mark(oe),Z=u.a.mark(ce),ee="SETTINGS_SHOW",te="SETTINGS_HIDE",re="SETTINGS_FORM_SUCCEEDED",ae={show:!1};function ne(){return{type:te}}function oe(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(re,ce);case 2:case"end":return e.stop()}}),$)}function ce(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)(ne());case 2:return e.next=4,Object(d.c)({type:J,payload:{text:"Param\xe8tres enregistr\xe9s !",type:"success"}});case 4:case"end":return e.stop()}}),Z)}var se=185,ie=190,ue=u.a.mark(ge),le=u.a.mark(Oe),pe=u.a.mark(Ee),de="SUMMARY_INTERVAL_REGISTRATION",me="SUMMARY_REQUESTED",he="SUMMARY_LOADED",fe="SUMMARY_ERRORED",ye={homeTemperature:"-",outsideTemperature:"-",outsideRain:"-"};function ve(){return{type:me}}function be(e){return{type:he,payload:e}}function ge(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(me,Ee);case 2:return e.next=4,Object(d.g)(de,Oe);case 4:case"end":return e.stop()}}),ue)}function Oe(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(d.c)(ve());case 3:return e.next=5,Object(d.b)(6e4);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),le)}function Ee(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.a)(b,se);case 3:return e=t.sent,t.next=6,Object(d.c)(be(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(d.c)((r=t.t0,{type:fe,payload:r}));case 12:case"end":return t.stop()}var r}),pe,null,[[0,8]])}var je=u.a.mark(Ne),xe=u.a.mark(De),ke="ROOM_REQUESTED",Se="ROOM_LOADED",we="ROOM_ERRORED",Ce={loading:!1,error:!1,list:[]};function Re(e){return{type:Se,payload:e}}function Ne(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(ke,De);case 2:case"end":return e.stop()}}),je)}function De(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.a)(g);case 3:return e=t.sent,t.next=6,Object(d.c)(Re(e));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(d.c)((r=t.t0,{type:we,payload:r}));case 12:case"end":return t.stop()}var r}),xe,null,[[0,8]])}var _e=r(6),Te=u.a.mark(Ue),Me=u.a.mark(qe);function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var Ie="CAMERA_IMAGE_REQUESTED",He="CAMERA_IMAGE_LOADED",Le="CAMERA_IMAGE_ERRORED",Pe={};function Fe(e,t){return{type:He,payload:{cameraId:e,imageUrl:t}}}function Ue(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Ie,qe);case 2:case"end":return e.stop()}}),Te)}function qe(e){var t,r,a,n;return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t=e.cameraId,o.next=4,Object(d.a)(h);case 4:return r=o.sent,o.next=7,Object(d.a)(b,t);case 7:if(a=o.sent,0!==(n=a.cmds.filter((function(e){return"CAMERA_URL"===e.generic_type}))).length){o.next=11;break}throw new TypeError("Camera not detected");case 11:return o.next=13,Object(d.c)(Fe(t,r.url+n[0].currentValue));case 13:o.next=19;break;case 15:return o.prev=15,o.t0=o.catch(0),o.next=19,Object(d.c)((c=o.t0,{type:Le,error:c}));case 19:case"end":return o.stop()}var c}),Me,null,[[0,15]])}var Ge=1094,Be=u.a.mark(Ze),Ve=u.a.mark(et),Qe=u.a.mark(tt),Je="LIGHT_ALL_STATUS_REQUESTED",Ye="LIGHT_ALL_STATUS_LOADED",We="LIGHT_ALL_STATUS_ERRORED",Ke="LIGHT_ALL_OFF_REQUESTED",Xe={loading:!1,error:!1,lights:[]};function ze(){return{type:Je}}function $e(e){return{type:Ye,payload:e}}function Ze(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Je,et);case 2:return e.next=4,Object(d.f)(Ke,tt);case 4:case"end":return e.stop()}}),Be)}function et(e){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.a)(b,ie);case 3:return t=e.sent,e.next=6,Object(d.c)($e(t));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(d.c)((r=e.t0,{type:We,payload:r}));case 12:case"end":return e.stop()}var r}),Ve,null,[[0,8]])}function tt(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.a)(O,Ge);case 3:return e.next=5,Object(d.b)(3e3);case 5:return e.next=7,Object(d.c)(ze());case 7:return e.next=9,Object(d.c)(ve());case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,Object(d.c)(K("Erreur lors de l'extinction des lumi\xe8res !"));case 15:case"end":return e.stop()}}),Qe,null,[[0,11]])}var rt=r(26),at=u.a.mark(jt),nt=u.a.mark(xt),ot=u.a.mark(kt),ct=u.a.mark(St);function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(r,!0).forEach((function(t){Object(_e.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ut="DOOR_STATUS_WITH_HISTORY_REQUESTED",lt="DOOR_STATUS_REQUESTED",pt="DOOR_STATUS_LOADED",dt="DOOR_STATUS_ERRORED",mt="DOOR_HISTORY_REQUESTED",ht="DOOR_HISTORY_LOADED",ft="DOOR_HISTORY_ERRORED",yt="DOOR_HISTORY_SHOW",vt="DOOR_HISTORY_HIDE",bt={};function gt(e){return{type:dt,payload:e}}function Ot(e){return{type:mt,payload:e}}function Et(e){return{type:ft,payload:e}}function jt(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(ut,xt);case 2:return e.next=4,Object(d.f)(lt,kt);case 4:return e.next=6,Object(d.f)(mt,St);case 6:case"end":return e.stop()}}),at)}function xt(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.d)((r=e.payload,{type:lt,payload:r}));case 2:return t.next=4,Object(d.d)(Ot(e.payload));case 4:case"end":return t.stop()}var r}),nt)}function kt(e){var t;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.a)(E,e.payload.id);case 3:return t=r.sent,r.next=6,Object(d.c)({type:pt,payload:t});case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(d.c)(gt({id:e.payload.id,error:r.t0}));case 12:case"end":return r.stop()}}),ot,null,[[0,8]])}function St(e){var t,r;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(d.a)(j,e.payload.id);case 3:return t=a.sent,r={id:e.payload.id,history:t},a.next=7,Object(d.c)({type:ht,payload:r});case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(d.c)(Et({id:e.payload.id,error:a.t0}));case 13:case"end":return a.stop()}}),ct,null,[[0,9]])}var wt=u.a.mark(Gt),Ct=u.a.mark(Bt),Rt=u.a.mark(Vt);function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(r,!0).forEach((function(t){Object(_e.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _t=1e3,Tt="MODE_LIST_REQUESTED",Mt="MODE_LIST_LOADED",At="MODE_LIST_ERRORED",It="MODE_CHANGE_REQUESTED",Ht="MODE_CHANGE_SUCCEEDED",Lt="MODE_CHANGE_ERRORED",Pt={};function Ft(e){return{type:Tt,id:e}}function Ut(e){return{type:Mt,payload:e}}function qt(e){return{type:At,payload:e}}function Gt(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.f)(Tt,Bt);case 2:return e.next=4,Object(d.f)(It,Vt);case 4:case"end":return e.stop()}}),wt)}function Bt(e){var t;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(d.a)(b,e.id);case 3:return t=r.sent,r.next=6,Object(d.c)(Ut(t));case 6:r.next=12;break;case 8:return r.prev=8,r.t0=r.catch(0),r.next=12,Object(d.c)(qt({id:e.id,error:r.t0}));case 12:case"end":return r.stop()}}),Ct,null,[[0,8]])}function Vt(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(d.a)(O,e.payload.cmd);case 3:return t.next=5,Object(d.b)(_t);case 5:return t.next=7,Object(d.c)((a={equipment:e.payload.equipment,cmd:e.payload.cmd},{type:Ht,payload:a}));case 7:t.next=15;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(d.c)((r=t.t0,{type:Lt,payload:r}));case 13:return t.next=15,Object(d.c)(K("Erreur lors du changement de mode !"));case 15:return t.prev=15,t.next=18,Object(d.c)(Ft(e.payload.equipment));case 18:return t.finish(15);case 19:case"end":return t.stop()}var r,a}),Rt,null,[[0,9,15,19]])}var Qt=u.a.mark(Kt),Jt=Object(p.a)(),Yt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Wt=Object(l.c)({launchScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case L:return{show:!0,showSetup:!0};case H:return{show:!1,showSetup:!1};default:return e}},settingsForm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case S:return{checkFailed:!1,saveRequested:!0,saveFailed:!1};case w:return{checkFailed:!0,saveRequested:!1,saveFailed:!1};case R:return{checkFailed:!1,saveRequested:!1,saveFailed:!0};case C:return{checkFailed:!1,saveRequested:!1,saveFailed:!1};default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae;switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case ee:return{show:!0,checkFailed:!1,saveRequested:!1,saveFailed:!1};case te:return{show:!1,checkFailed:!1,saveRequested:!1,saveFailed:!1};default:return e}},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case J:return{text:t.payload.text,type:t.payload.type};case Y:return{text:""};default:return e}},summary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case he:var r=t.payload.cmds,a=r.find((function(e){return"temp-home"===e.name})),n=r.find((function(e){return"temp-outside"===e.name})),o=r.find((function(e){return"rain"===e.name})),c=r.find((function(e){return"light"===e.name}));return{homeTemperature:a?parseFloat(a.currentValue).toFixed(1):"-",outsideTemperature:n?n.currentValue:"-",outsideRain:o?o.currentValue:"-",light:c.currentValue};default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ke:return{loading:!0,error:!1,list:[]};case Se:return{loading:!1,error:!1,list:t.payload.map((function(e){return{id:e.id,name:e.name}}))};case we:return{loading:!1,error:!0,list:[]};default:return e}},camera:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case He:return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(r,!0).forEach((function(t){Object(_e.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,Object(_e.a)({},t.payload.cameraId,t.payload.imageUrl));default:return e}},light:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Je:return{loading:!0,error:!1,lights:[]};case We:return{loading:!1,error:!0,lights:[]};case Ye:var r=t.payload.cmds,a=[];return r.forEach((function(e){if("1"===e.isVisible&&"refresh"!==e.logicalId){var t=e.name,r="de la";e.display.parameters&&e.display.parameters.label&&e.display.parameters.singularComplement&&(t=e.display.parameters.label,r=e.display.parameters.singularComplement),a.push({id:e.id,name:e.name,order:e.order,value:e.currentValue,label:t,singularComplement:r})}})),{loading:!1,error:!1,lights:a};default:return e}},door:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case lt:return it({},e,Object(_e.a)({},t.payload.id,it({},e[t.payload.id],{loading:!0})));case dt:return it({},e,Object(_e.a)({},t.payload.id,it({},e[t.payload.id],{loading:!1,error:!0})));case pt:var r=t.payload,a=r.name,n="de la";return r.display.parameters&&r.display.parameters.label&&r.display.parameters.singularComplement&&(a=r.display.parameters.label,n=r.display.parameters.singularComplement),it({},e,Object(_e.a)({},r.id,{id:r.id,name:r.name,order:r.order,open:0!==r.currentValue,label:a,singularComplement:n,loading:!1,error:!1}));case mt:return it({},e,Object(_e.a)({},t.payload.id,it({},e[t.payload.id],{loading:!0,error:!1})));case ft:return it({},e,Object(_e.a)({},t.payload.id,it({},e[t.payload.id],{loading:!1,error:!0})));case ht:var o=t.payload.history.map((function(e){return{datetime:rt.DateTime.fromFormat(e.datetime,"yyyy-MM-dd TT"),open:"0"!==e.value}})).sort((function(e,t){return t.datetime.diff(e.datetime)}));return it({},e,Object(_e.a)({},t.payload.id,it({},e[t.payload.id],{history:o})));case yt:return it({},e,Object(_e.a)({},t.payload.id,it({},e[t.payload.id],{showHistory:!0})));case vt:return it({},e,Object(_e.a)({},t.payload.id,it({},e[t.payload.id],{showHistory:!1})));default:return e}},mode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Tt:return Dt({},e,Object(_e.a)({},t.id,Dt({},e[t.id],{loading:!0})));case At:return Dt({},e,Object(_e.a)({},t.payload.id,Dt({},e[t.payload.id],{loading:!1,error:!0})));case Mt:var r=t.payload.cmds,a=r.find((function(e){return"currentMode"===e.logicalId})).currentValue,n=[];r.forEach((function(e){"1"===e.isVisible&&"currentMode"!==e.logicalId&&n.push({id:e.id,name:e.name,order:e.order})}));var o=n.find((function(e){return e.name===a}));return Dt({},e,Object(_e.a)({},t.payload.id,{currentMode:o,modes:n,loading:!1,error:!1}));case It:return Dt({},e,Object(_e.a)({},t.payload.equipment,Dt({},e[t.payload.equipment],{loading:!0})));case Ht:return Dt({},e,Object(_e.a)({},t.payload.equipment,Dt({},e[t.payload.equipment],{loading:!1,error:!1})));default:return e}}});function Kt(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.e)(U);case 2:return e.next=4,Object(d.e)(D);case 4:return e.next=6,Object(d.e)(oe);case 6:return e.next=8,Object(d.e)(X);case 8:return e.next=10,Object(d.e)(ge);case 10:return e.next=12,Object(d.e)(Ne);case 12:return e.next=14,Object(d.e)(Ue);case 14:return e.next=16,Object(d.e)(Ze);case 16:return e.next=18,Object(d.e)(jt);case 18:return e.next=20,Object(d.e)(Gt);case 20:case"end":return e.stop()}}),Qt)}var Xt=Object(l.e)(Wt,Yt(Object(l.a)(Jt)));Jt.run(Kt);var zt=Xt,$t=(r(43),r(8)),Zt=r(9),er=r(12),tr=r(10),rr=r(11),ar=r(13),nr=function(e){function t(){var e;return Object($t.a)(this,t),(e=Object(er.a)(this,Object(tr.a)(t).call(this))).state={url:"",apikey:""},e.handleChange=e.handleChange.bind(Object(ar.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(ar.a)(e)),e}return Object(rr.a)(t,e),Object(Zt.a)(t,[{key:"componentDidMount",value:function(){var e=this;h().then((function(t){e.setState({url:t.url,apikey:t.apikey})}))}},{key:"handleChange",value:function(e){this.setState(Object(_e.a)({},e.target.id,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.saveSettingsForm({url:this.state.url,apikey:this.state.apikey,onSuccess:this.props.onSuccess})}},{key:"render",value:function(){var e=this.props.checkFailed?n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"URL ou Clef d'API invalide !"):"",t=this.props.saveFailed?n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Erreur lors de la sauvegarde !"):"",r=this.props.saveRequested?n.a.createElement("button",{type:"button",className:"btn btn-secondary btn-lg btn-block",disabled:!0},"Enregistrement"):n.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg btn-block"},"Sauvegarder");return n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"url"},"Jeedom URL"),n.a.createElement("input",{type:"text",className:"form-control",id:"url",value:this.state.url,onChange:this.handleChange}),n.a.createElement("small",{className:"form-text text-muted"},"URL publique d'acc\xe8s \xe0 Jeedom.")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"apikey"},"Clef d'API Jeedom"),n.a.createElement("input",{type:"text",className:"form-control",id:"apikey",value:this.state.apikey,onChange:this.handleChange}),n.a.createElement("small",{className:"form-text text-muted"},"Configuration > API > Clef API")),e,t,r)}}]),t}(a.Component);var or=Object(s.b)((function(e){return e.settingsForm}),{saveSettingsForm:function(e){return{type:S,payload:e}}})(nr),cr=r(27),sr=r.n(cr);r(44);var ir=function(e){var t=e.showSetup?"":n.a.createElement("img",{className:"loader",src:sr.a,width:"50",alt:""}),r=e.showSetup?n.a.createElement(or,{onSuccess:"props.onSuccess"}):"";return n.a.createElement("div",{className:"launchScreen position-fixed"},n.a.createElement("div",{className:"container fixed-bottom"},n.a.createElement("h1",null,"Bienvenue,"),t,r))};r(45),r(46);var ur=function(e){var t=e.image,r="";if(t){var a={backgroundImage:"url("+t+")"},o=["pill-img"];e.text?o.push("pill-img-with-text"):o.push("pill-img-no-text"),r=n.a.createElement("span",{className:o.join(" "),style:a},"\xa0")}return n.a.createElement("span",null,n.a.createElement("span",{className:"pill"},r,e.text),"\xa0")},lr=r(28),pr=r.n(lr),dr=r(29),mr=r.n(dr),hr=r(30),fr=r.n(hr);var yr=function(e){var t=e.summary.outsideRain>0?mr.a:pr.a,r=e.summary.light?n.a.createElement(ur,{image:fr.a}):"";return n.a.createElement("h5",{className:"house-summary"},n.a.createElement(ur,{text:e.summary.homeTemperature+"\xb0"}),n.a.createElement(ur,{image:t,text:e.summary.outsideTemperature+"\xb0"}),r)};var vr=function(e){return n.a.createElement("header",{className:"app-header"},n.a.createElement("div",{className:"container"},n.a.createElement("a",{href:"#Settings",className:"settings-show text-hide",onClick:e.onShowSettings},"Param\xe8tres"),n.a.createElement("h1",null,"Salut,"),n.a.createElement("h3",null,"Tout va bien \xe0 la maison"),n.a.createElement(yr,{summary:e.summary})))};r(47);var br=function(e){var t=["card"];e.error&&t.push("border-danger");var r={backgroundImage:"url("+e.backgroundUrl+")",backgroundSize:"cover"},a=e.imgTop?n.a.createElement("img",{className:"card-img-top",src:e.imgTop,alt:""}):"",o=e.imgBottom?n.a.createElement("img",{className:"card-img-top",src:e.imgBottom,alt:""}):"",c=e.overlay?n.a.createElement("div",{className:"card-img-overlay"},n.a.createElement("p",{className:"card-text text-center"},e.overlay)):"",s=e.children?"has-children":"no-child";return n.a.createElement("div",{className:t.join(" "),style:r},a,c,n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title "+s},e.title),e.children),o)},gr=function(e){function t(){var e;return Object($t.a)(this,t),(e=Object(er.a)(this,Object(tr.a)(t).call(this))).state={time:Date.now()},e}return Object(rr.a)(t,e),Object(Zt.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return n.a.createElement(br,{title:this.props.title,imgTop:this.props.cameraImage+"&time="+this.state.time,overlay:this.props.overlay},this.props.children)}}]),t}(a.Component),Or=(r(48),function(e){function t(){var e;return Object($t.a)(this,t),(e=Object(er.a)(this,Object(tr.a)(t).call(this))).state={show:!1},e.handleClose=e.handleClose.bind(Object(ar.a)(e)),e}return Object(rr.a)(t,e),Object(Zt.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({show:!0})}),1)}},{key:"handleClose",value:function(e){var t=this;e.preventDefault(),this.setState({show:!1}),this.props.onClose&&setTimeout((function(){t.props.onClose()}),350)}},{key:"render",value:function(){var e=this.state.show?" backdrop-show":" backdrop-hide";return n.a.createElement("div",{className:"backdrop settings-backdrop "+e},n.a.createElement("div",{className:"backdrop-background",onClick:this.handleClose}),n.a.createElement("div",{className:"backdrop-wrapper"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-12 col-lg-10 col-xl-9 backdrop-content"},n.a.createElement("h3",null,this.props.title),n.a.createElement("a",{href:"#App",className:"backdrop-close text-hide",onClick:this.handleClose},"Fermer"),n.a.createElement("hr",null),this.props.children)))))}}]),t}(a.Component));function Er(e,t){var r=e.open?"badge-danger":"badge-success";return n.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center",key:t},e.datetime.toFormat("dd/LL/yyyy HH:mm:ss"),n.a.createElement("span",{className:"badge badge-pill "+r},e.open?"Ouvert":"Ferm\xe9"))}var jr=function(e){if(!e.history)return"";var t=e.history.slice(0,15).map(Er);return e.show?n.a.createElement(Or,{title:e.title,onClose:e.onClose},n.a.createElement("p",null,"15 derniers \xe9v\xe8nements :"),n.a.createElement("ul",{className:"list-group list-group-flush"},t)):""};function xr(e,t){if(!t)return e+" est dans un \xe9tat ind\xe9termin\xe9e";var r=t.open?"ouvert":"ferm\xe9";if(!t.history||0===t.history.length)return e+" est "+r+" depuis une p\xe9riode ind\xe9termin\xe9e";var a=t.history[0].datetime.diffNow().negate();return e+" est "+r+" depuis "+(a.toFormat("d")>1?a.toFormat("d")+" jours":a.toFormat("d")>0?"1 jour":a.toFormat("h")>1?a.toFormat("h")+" heures":a.toFormat("h")>0?"1 heure":a.toFormat("m")>1?a.toFormat("m")+" minutes":a.toFormat("m")>0?"1 minute":"moins d'une minute")+"."}var kr=function(e){var t=xr("Le garage",e.door),r=e.door&&e.door.loading?"Chargement...":"";return n.a.createElement(gr,{title:"Garage",cameraImage:e.cameraImage,overlay:r},n.a.createElement("p",{className:"card-text"},t),n.a.createElement("div",{className:"text-right"},e.onHistoryClick?n.a.createElement("button",{className:"btn btn-link",onClick:e.onHistoryClick},"Historique"):"",n.a.createElement("button",{className:"btn btn-primary"},"Actioner")),n.a.createElement(jr,{title:"Historique",show:e.door&&e.door.showHistory,onClose:e.onHistoryBackdropClose,history:e.door&&e.door.history?e.door.history:null}))};var Sr=function(e){var t=e.door&&e.door.loading?"Chargement...":"",r=xr("La porte",e.door);return n.a.createElement(br,{title:e.title,overlay:t},n.a.createElement("p",{className:"card-text"},r),n.a.createElement("div",{className:"text-right"},e.onHistoryClick?n.a.createElement("button",{className:"btn btn-link",onClick:e.onHistoryClick},"Historique"):""),n.a.createElement(jr,{title:"Historique",show:e.door&&e.door.showHistory,onClose:e.onHistoryBackdropClose,history:e.door&&e.door.history?e.door.history:null}))};var wr=function(e){var t=e.lights.filter((function(e){return 1===e.value})),r="Le statut des lumi\xe8res est ind\xe9termin\xe9 !";0===t.length&&(r="Toutes les lumi\xe8res sont \xe9teintes."),1===t.length&&(r="La lumi\xe8re "+t[0].singularComplement+" "+t[0].label+" est allum\xe9e."),t.length>1&&(r="Les lumi\xe8res "+t.reduce((function(e,t){return e+t.label+", "}),"")+" sont allum\xe9es.");var a=e.loading?"Chargement...":"";return e.error?n.a.createElement(br,{title:e.title,error:!0,overlay:a},n.a.createElement("p",{className:"card-text"},"Oups une erreur est survenue dans la r\xe9cup\xe9ration de l'\xe9tat des lumi\xe8res !"),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary",onClick:e.onRetry},"R\xe9-essayer"))):n.a.createElement(br,{title:"Lumi\xe8res",overlay:a},n.a.createElement("p",{className:"card-text"},r),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary",onClick:e.onOffClick},"Tout \xe9teindre")))};var Cr=function(e){var t=function(e){return{id:e.split("|")[0],name:e.split("|")[1]}},r=t(e.currentMode),a=e.modes.split("##").map((function(a){var o=t(a),c=o.id,s=o.name,i=c===r.id;return n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){t.preventDefault();var r={equipment:e.equipment,cmd:c};e.onModeClick(r)},disabled:i,key:c},s)})),o=e.loading?"Chargement...":"";return e.error?n.a.createElement(br,{title:e.title,error:!0,overlay:o},n.a.createElement("p",{className:"card-text"},"Oups une erreur est survenue dans la r\xe9cup\xe9ration des modes !"),n.a.createElement("div",{className:"text-right"},n.a.createElement("button",{className:"btn btn-primary",onClick:e.onRetry},"R\xe9-essayer"))):n.a.createElement(br,{title:e.title,overlay:o},n.a.createElement("p",{className:"card-text"},"Actuellement en mode ",n.a.createElement("strong",null,r.name),"."),n.a.createElement("div",{className:"text-center"},n.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Modes"},a)))},Rr=function(e){function t(){var e;return Object($t.a)(this,t),(e=Object(er.a)(this,Object(tr.a)(t).call(this))).handleHouseModeRetry=e.handleHouseModeRetry.bind(Object(ar.a)(e)),e.handleLightStatusRetry=e.handleLightStatusRetry.bind(Object(ar.a)(e)),e}return Object(rr.a)(t,e),Object(Zt.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllLightStatus(),this.props.getDoorStatusHistory({id:2144}),this.props.getDoorStatusHistory({id:2147}),this.props.getCameraImage(56),this.props.getCameraImage(52),this.props.getMode(80)}},{key:"handleHouseModeRetry",value:function(){this.props.getMode(80)}},{key:"handleLightStatusRetry",value:function(){this.props.getAllLightStatus()}},{key:"formatModeToProps",value:function(e){return e.id+"|"+e.name}},{key:"getCurrentMode",value:function(e){return e&&e.currentMode?this.formatModeToProps(e.currentMode):"|..."}},{key:"getModes",value:function(e){return e&&e.modes?e.modes.map(this.formatModeToProps).join("##"):"|..."}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"card-columns"},n.a.createElement(wr,{error:this.props.lights.error,loading:this.props.lights.loading,lights:this.props.lights.lights,onOffClick:this.props.handleLightOffClick,onRetry:this.handleLightStatusRetry}),n.a.createElement(kr,{title:"Garage",cameraImage:this.props.garageCameraImage,door:this.props.garageDoor,onHistoryClick:function(){e.props.handleDoorHistoryClick(2144)},onHistoryBackdropClose:function(){e.props.handleHistoryBackdropClose(2144)}}),n.a.createElement(Sr,{title:"Entr\xe9e",door:this.props.enrtyDoor,onHistoryClick:function(){e.props.handleDoorHistoryClick(2147)},onHistoryBackdropClose:function(){e.props.handleHistoryBackdropClose(2147)}}),n.a.createElement(gr,{title:"S\xe9jour",cameraImage:this.props.livingCameraImage}),n.a.createElement(Cr,{title:"Maison",loading:!!this.props.houseMode&&this.props.houseMode.loading,error:!!this.props.houseMode&&this.props.houseMode.error,equipment:80,currentMode:this.getCurrentMode(this.props.houseMode),modes:this.getModes(this.props.houseMode),onModeClick:this.props.handleChangeMode,onRetry:this.handleHouseModeRetry})))}}]),t}(a.Component),Nr={getAllLightStatus:ze,getDoorStatusHistory:function(e){return{type:ut,payload:e}},handleDoorHistoryClick:function(e){return{type:yt,payload:{id:e}}},handleHistoryBackdropClose:function(e){return{type:vt,payload:{id:e}}},handleLightOffClick:function(){return{type:Ke}},getCameraImage:function(e){return{type:Ie,cameraId:e}},getMode:Ft,handleChangeMode:function(e){return{type:It,payload:e}}},Dr=Object(s.b)((function(e){return{lights:e.light,garageDoor:e.door[2144],enrtyDoor:e.door[2147],garageCameraImage:e.camera[56],livingCameraImage:e.camera[52],houseMode:e.mode[80]}}),Nr)(Rr);r(49);var _r=function(e){return n.a.createElement("div",{className:"col-6 col-md-4 col-lg-3"},n.a.createElement("div",{className:"card room"},e.name))};r(50);var Tr=function(e){var t=e.error?n.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Erreur lors de la r\xe9cup\xe9ration des pi\xe8ces",n.a.createElement("button",{type:"button",className:"btn btn-link",onClick:e.getRooms},"R\xe9essayer")):"",r=e.loading?n.a.createElement("div",{className:"alert alert-light",role:"alert"},"R\xe9cup\xe9ration des pi\xe8ces..."):"",a=0!==e.rooms.length||e.error||e.loading?"":n.a.createElement("div",{className:"alert alert-info",role:"alert"},"Aucune pi\xe8ce de d\xe9fini"),o=e.rooms.length>0&&!e.error&&!e.loading?n.a.createElement("div",{className:"row"},e.rooms.map((function(e){return n.a.createElement(_r,{key:e.id,name:e.name})}))):"";return n.a.createElement("div",{className:"room-list-container"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row room-list"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h3",null,"Pi\xe8ces"),r,t,a,o))))};var Mr=function(e){return e.show?n.a.createElement(Or,{title:"Param\xe8tres",onClose:e.onClose},n.a.createElement(or,{onSuccess:e.onSuccess})):""};r(51);var Ar=function(e){var t=e.text?" snackbar-show":" snackbar-hide";return n.a.createElement("div",{className:"container snackbar-container "+t},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12 fixed-bottom"},n.a.createElement("div",{className:"snackbar alert alert-"+e.type,role:"alert"},e.text))))},Ir=(r(52),function(e){function t(){return Object($t.a)(this,t),Object(er.a)(this,Object(tr.a)(t).apply(this,arguments))}return Object(rr.a)(t,e),Object(Zt.a)(t,[{key:"componentDidMount",value:function(){this.props.appLaunchRequested(),this.props.setSummaryIntervalRegistration(),this.props.getRooms()}},{key:"render",value:function(){return this.props.launchScreen.show?n.a.createElement("div",{className:"App",id:"App"},n.a.createElement(ir,{showSetup:this.props.launchScreen.showSetup,onSuccess:this.props.handleLaunchScreenSetupSuccess})):n.a.createElement("div",{className:"App",id:"App"},n.a.createElement(vr,{onShowSettings:this.props.handleShowSettings,summary:this.props.summary}),n.a.createElement(Dr,null),n.a.createElement(Tr,{rooms:this.props.rooms.list,loading:this.props.rooms.loading,error:this.props.rooms.error}),n.a.createElement(Mr,{show:this.props.showSettingsBackdrop,onClose:this.props.handleCloseSettings,onSuccess:this.props.handleSettingsBackdropFormSuccess}),n.a.createElement(Ar,{text:this.props.snackbar.text,type:this.props.snackbar.type}))}}]),t}(a.Component)),Hr={appLaunchRequested:function(){return{type:I}},handleShowSettings:function(e){return e&&e.preventDefault(),{type:ee}},handleCloseSettings:ne,handleLaunchScreenSetupSuccess:F,handleSettingsBackdropFormSuccess:function(){return{type:re}},setSummaryIntervalRegistration:function(){return{type:de}},getRooms:function(){return{type:ke}}},Lr=Object(s.b)((function(e){return{launchScreen:e.launchScreen,showSettingsBackdrop:e.settings.show,summary:e.summary,rooms:e.room,snackbar:e.snackbar}}),Hr)(Ir);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(s.a,{store:zt},n.a.createElement(Lr,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.a7e24342.chunk.js.map